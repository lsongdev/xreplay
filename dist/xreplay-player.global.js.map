{"version":3,"file":"xreplay-player.global.js","sources":["../utils/node.ts","../types/index.ts","../utils/tools/common.ts","../utils/tools/dom.ts","../utils/tools/transform.ts","../utils/tools/animation-frame.ts","../node_modules/smoothscroll-polyfill/dist/smoothscroll.js","../player/utils/fmp.ts","../player/utils/observer.ts","../player/utils/redux/create-store.ts","../player/utils/redux/combine-reducers.ts","../player/utils/redux/reducers/progress.ts","../player/utils/redux/reducers/player.ts","../player/utils/transform.ts","../player/utils/redux/reducers/replay-data.ts","../player/utils/redux/index.ts","../node_modules/is-mobile/index.js","../virtual-dom/dom.ts","../virtual-dom/deserialize.ts","../player/utils/common.ts","../player/utils/pure-redux/index.ts","../player/utils/heat-bar/base.ts","../player/utils/heat-bar/pillar.ts","../player/utils/heat-bar/line.ts","../player/utils/component.ts","../player/utils/scroll.ts","../player/utils/tpl.ts","../player/types.ts","../player/components/keyboard.ts","../player/renders/font.ts","../player/renders/patch.ts","../player/renders/location.ts","../player/renders/snapshot.ts","../player/renders/scroll.ts","../player/renders/window.ts","../player/renders/mouse.ts","../player/renders/form-el.ts","../player/renders/dom.ts","../player/render.ts","../player/components/player.ts","../player/components/pointer.ts","../player/components/progress.ts","../player/components/broadcaster.ts","../player/components/toolbox.ts","../player/components/panel.ts","../player/components/page-start.ts","../player/components/container.ts","../player/index.ts"],"sourcesContent":["\nclass NodeStore {\n    private static nodeId = 1\n    private nodeMap: Map<number, Node>\n    private idMap: WeakMap<Node, number>\n\n    constructor() {\n        this.init()\n    }\n\n    private init() {\n        this.nodeMap = new Map()\n        this.idMap = new WeakMap()\n    }\n\n    public reset() {\n        this.nodeMap.clear()\n    }\n\n    public createNodeId = () => NodeStore.nodeId++\n\n    public getNode(id: number) {\n        return this.nodeMap.get(id) || null\n    }\n\n    public addNode(node: Node, id: number = this.createNodeId()) {\n        this.idMap.set(node, id)\n        this.nodeMap.set(id, node)\n        return id\n    }\n\n    public removeNode(id: number) {\n        this.nodeMap.delete(id)\n        this.idMap.delete(this.getNode(id) as Node)\n    }\n\n    public getNodeId(node: Node) {\n        return this.idMap.get(node)\n    }\n\n    public updateNode(id: number, node: Node) {\n        this.idMap.set(node, id)\n        this.nodeMap.set(id, node)\n    }\n}\n\nexport const nodeStore = new NodeStore()\n","\nexport type ValueOf<T> = T[keyof T]\nexport type ValueOfKey<T, K extends keyof T> = T[K]\nexport type UnionToIntersection<U> = (U extends any ? (k: U) => void : never) extends (k: infer I) => void ? I : never\n\nexport interface InfoData {\n    doctype: DocumentType\n    href: string\n    width: number\n    height: number\n    scrollLeft: number\n    scrollTop: number\n    frameId: number | null\n}\n\nexport type SnapshotRecord = BaseRecord<RecordType.SNAPSHOT, { vNode: VNode } & InfoData>\n\ntype Extra = {\n    props: {\n        textContent: string\n        value: string\n        checked: boolean\n        selected: boolean\n        scroll?: { top: number; left: number }\n        autoplay: boolean\n        controls: boolean\n        loop: boolean\n        muted: boolean\n    }\n    isSVG: boolean\n}\n\ntype Children = (VNode | VSNode)[]\n\ntype Attrs = { [key: string]: string }\n\nexport interface VSNode {\n    id: number\n    type: number\n    value: string\n}\n\nexport interface VNode {\n    type: number\n    id: number\n    tag: string\n    attrs: Attrs\n    children: Children\n    extra: Extra\n}\n\nexport enum RecordType {\n    'HEAD',\n    'SNAPSHOT',\n    'WINDOW',\n    'SCROLL',\n    'MOUSE',\n    'DOM',\n    'FORM_EL',\n    'LOCATION',\n    'AUDIO',\n    'CANVAS',\n    'TERMINATE',\n    'FONT',\n    'PATCH',\n    'CUSTOM',\n    'WEBGL',\n    'CANVAS_SNAPSHOT',\n    'VIDEO'\n}\n\nexport enum FormElementEvent {\n    'PROP',\n    'INPUT',\n    'CHANGE',\n    'FOCUS',\n    'BLUR'\n}\nexport enum MouseEventType {\n    'MOVE',\n    'CLICK'\n}\n\nexport type TerminateRecord = BaseRecord<RecordType.TERMINATE, null>\n\nexport type WindowRecord = BaseRecord<RecordType.WINDOW, WindowRecordData>\n\nexport interface WindowRecordData {\n    id: number | null\n    width: number\n    height: number\n}\n\nexport type ScrollRecord = BaseRecord<RecordType.SCROLL, ScrollRecordData>\n\nexport interface ScrollRecordData {\n    id: number | null\n    top: number\n    left: number\n    behavior?: 'auto'\n}\n\nexport type MouseRecord = BaseRecord<RecordType.MOUSE, MouseRecordData>\nexport interface MouseRecordData {\n    type: MouseEventType\n    x: number\n    y: number\n    id?: number,\n    selector?: string,\n}\n\nexport type DOMRecord = BaseRecord<RecordType.DOM, DOMRecordData>\n\nexport interface AttributesUpdateData {\n    id: number\n    value: string | boolean\n    key: string\n}\n\nexport interface CharacterDataUpdateData {\n    parentId: number\n    value: string\n    id: number\n}\n\nexport interface UpdateNodeData<T = VSNode | VNode | number> {\n    parentId: number\n    nextId: number | null\n    node: T\n}\n\nexport interface movedNodesData {\n    parentId: number\n    id: number\n    nextId: number | null\n}\n\nexport interface RemoveUpdateData {\n    parentId: number\n    id: number\n}\n\nexport interface DOMRecordData {\n    addedNodes?: UpdateNodeData[]\n    movedNodes?: movedNodesData[]\n    removedNodes?: RemoveUpdateData[]\n    attrs?: AttributesUpdateData[]\n    texts?: CharacterDataUpdateData[]\n}\n\nexport type FormElementRecord = BaseRecord<RecordType.FORM_EL, FormElementRecordData>\n\nexport interface FormElementRecordData {\n    type: FormElementEvent\n    id: number\n    key?: string\n    value?: string\n    patches?: FormElementStrPatches[]\n}\n\ninterface FormElementStrPatches {\n    index: number\n    type: 'add' | 'rm'\n    value?: string | undefined\n    len?: number | undefined\n}\n\nexport type AudioRecord<T = AudioStrList | AudioOptions | AudioData> = BaseRecord<RecordType.AUDIO, T>\nexport interface AudioOptions {\n    type: 'opts'\n    data: AudioOptionsData\n}\nexport interface AudioStrList {\n    encode: 'base64'\n    type: 'pcm' | 'wav'\n    data: string[]\n}\n\nexport type LocationRecord = BaseRecord<RecordType.LOCATION, LocationRecordData>\n\nexport interface LocationRecordData {\n    href: string\n    path: string\n    hash: string\n    title: string\n    contextNodeId: number\n}\nexport type CanvasRecord = BaseRecord<RecordType.CANVAS, CanvasRecordData>\n\nexport type CanvasRecordData = CanvasMutationRecordData | CanvasInitSnapshotData | CanvasInitStatusData\n\nexport interface CanvasMutationRecordData {\n    id: number\n    strokes: {\n        name: keyof CanvasRenderingContext2D | number\n        args: any[]\n    }[]\n}\n\nexport interface CanvasInitSnapshotData {\n    id: number\n    src: string\n}\n\nexport interface CanvasInitStatusData {\n    id: number\n    status: { [key: string]: string | number }\n}\n\nexport type RecordEvent<T extends RecordData> = (e: T) => void\n\nexport type DBRecordData = { id: number } & RecordData\n\nexport type RecordData =\n    | HeadRecord\n    | SnapshotRecord\n    | FormElementRecord\n    | DOMRecord\n    | MouseRecord\n    | WindowRecord\n    | ScrollRecord\n    | AudioRecord\n    | LocationRecord\n    | CanvasRecord\n    | TerminateRecord\n    | FontRecord\n    | PreFetchRecord\n    | CustomRecord\n    | WebGLRecord\n    | CanvasSnapshotRecord\n    | VideoRecord\n\nexport interface AudioData {\n    src: string\n    opts: AudioOptionsData\n    wavStrList: string[]\n    pcmStrList: string[]\n    subtitles: SubtitlesData[]\n}\n\ninterface SubtitlesData {\n    start: string\n    end: string\n    text: string\n}\n\nexport interface AudioOptionsData {\n    sampleBits: 8 | 16\n    sampleRate: 8000 | 16000 | 22050 | 24000 | 44100 | 48000\n    channelCount: 1 | 2\n}\n\nexport interface VideoData {\n    id: number\n    src: string\n    startTime: number\n    endTime: number\n}\n\nexport type IRecorderStatus = 'PAUSE' | 'RECORDING' | 'STOP'\n\nexport enum TransactionMode {\n    'READONLY' = 'readonly',\n    'READWRITE' = 'readwrite',\n    'VERSIONCHANGE' = 'versionchange'\n}\n\nexport type WatcherArgs<T extends RecordData | HeadRecord, WatchersInstance = any, Recorder = any> = {\n    recorder: Recorder\n    context: Window\n    listenStore: Set<Function>\n    emit: RecordEvent<T>\n    relatedId: string\n    watchers: WatchersInstance\n}\n\nexport interface Constructable<T> {\n    new(...args: any): T\n}\n\nexport interface ReplayOptions {\n    exportName?: string\n    mode?: 'live' | 'default'\n    receiver?: (sender: (data: RecordData) => void) => void\n    autoplay?: boolean\n    records?: RecordData[]\n    target?: string | HTMLElement | Window\n    heatPoints?: boolean\n    timeMode?: 'recordingTime' | 'durationTime'\n    fastForward?: number[]\n    disableScrolling?: boolean\n}\n\nexport interface ReplayInternalOptions extends ReplayOptions {\n    destroyStore: Set<Function>\n    fastForward: number[]\n    autoplay: boolean\n    mode: 'live' | 'default'\n    target: string | HTMLElement | Window\n    timeMode: 'recordingTime' | 'durationTime'\n}\n\nexport interface ReplayData {\n    index?: number\n    head?: HeadRecord\n    snapshot: SnapshotRecord\n    records: RecordData[]\n    audio: AudioData\n    videos: VideoData[]\n}\n\nexport interface ReplayHead {\n    version: string\n    href: string\n    title: string\n    relatedId: string\n    userAgent: string\n    platform: string\n    beginTime: number\n    endTime?: number\n    extra?: {\n        [key: string]: string\n    }\n}\n\nexport type HeadRecord = BaseRecord<RecordType.HEAD, ReplayHead>\n\nexport interface BaseRecord<T, D = any> {\n    type: T\n    data: D\n    time: number\n    relatedId: string\n    id?: number\n}\n\nexport interface FontRecordData {\n    family: string\n    source: string\n}\n\nexport type FontRecord = BaseRecord<RecordType.FONT, FontRecordData>\n\nexport interface PreFetchRecordData {\n    id: number\n    tag: string\n    key: string\n    time: number\n    url: string\n    text: string\n}\n\nexport type PreFetchRecord = BaseRecord<RecordType.PATCH, PreFetchRecordData>\n\nexport type CustomRecordData = { [key: string]: any }\n\nexport type CustomRecord = BaseRecord<RecordType.CUSTOM, CustomRecordData>\n\nexport type WebGLRecord = BaseRecord<RecordType.WEBGL, WebGLRecordData>\n\nexport interface WebGLRecordData {\n    id: number\n    args: any[]\n}\n\nexport type CanvasSnapshotRecord = BaseRecord<RecordType.CANVAS_SNAPSHOT, CanvasSnapshotRecordData>\n\nexport interface CanvasSnapshotRecordData {\n    id: number\n    src: string\n}\n\nexport type VideoRecord = BaseRecord<RecordType.VIDEO, VideoRecordData>\n\nexport interface VideoRecordData {\n    id: number\n    dataStr?: string\n    blobUrl?: string\n}\n","\nimport * as diff from 'diff'\nimport { radix64 } from '../performance/radix64'\nimport { VNode, VSNode, SnapshotRecord, RecordData, RecordType } from '../../types'\n\nexport const isDev = process.env.NODE_ENV === 'development'\n\nimport { name, version, homepage } from '../../package.json';\n\nexport function logError(e: Error | string | any): string {\n    const msg = (e as Error).message || (e as string)\n    console.error(`TimeCat Error: ${msg}`)\n    return msg\n}\n\nexport function logWarn(e: Error | string): string {\n    const msg = (e as Error).message || (e as string)\n    console.warn(`TimeCat Warning: ${msg}`)\n    return msg\n}\n\nexport function logAdvice(msg: string): string {\n    console.log(`%c TimeCat Advice: ${msg}`, 'color:#0f0;')\n    return msg\n}\n\nexport function getTime(): number {\n    return Date.now()\n}\n\nexport function getRadix64TimeStr() {\n    return radix64.btoa(getTime())\n}\n\nexport function getRandomCode(len: 6 | 7 | 8 = 8) {\n    const code = (Math.random() * 20 + 16).toString(36).substring(2, len + 2)\n    return code.toUpperCase()\n}\n\nexport function secondToTime(second: number) {\n    if (second <= 0) {\n        second = 0\n    }\n    const [h, m, s] = [Math.floor(second / 3600), Math.floor((second / 60) % 60), Math.floor(second % 60)]\n    const timeStr = [h, m, s].map(i => (i <= 9 ? '0' + i : i)).join(':')\n    return timeStr.replace(/^00\\:/, '')\n}\n\nexport function getDateTime(timestamp: number) {\n    const date = new Date(timestamp)\n    const hours = date.getHours()\n    const minutes = '0' + date.getMinutes()\n    const seconds = '0' + date.getSeconds()\n    const formattedTime = (hours < 10 ? '0' + hours : hours) + ':' + minutes.substr(-2) + ':' + seconds.substr(-2)\n    return formattedTime\n}\n\nexport function toTimeStamp(timeStr: string) {\n    const parts = timeStr.split(':')\n    if (parts.length === 2) {\n        const [min, sec] = parts\n        return (+min * 60 + +sec) * 1000\n    }\n\n    const [hour, min, sec] = parts\n    return (+hour * 3600 + +min * 60 + +sec) * 1000\n}\n\nexport function isSnapshot(frame: RecordData) {\n    return (frame as SnapshotRecord).type === RecordType.SNAPSHOT && !(frame as SnapshotRecord).data.frameId\n}\n\nexport async function delay(t = 200): Promise<void> {\n    return new Promise(r => {\n        setTimeout(() => r(), t)\n    })\n}\nexport function isVNode(n: VNode | VSNode) {\n    return !!(n as VNode).tag\n}\n\nexport function getStrDiffPatches(oldStr: string, newStr: string) {\n    return getPatches(diff.diffChars(oldStr, newStr))\n}\n\nexport function revertStrByPatches(str: string, changes: ReturnType<typeof getStrDiffPatches>) {\n    changes.forEach((change: any) => {\n        const { type, value, len } = change\n        switch (type) {\n            case 'add':\n                str = str.substring(0, change.index) + value + str.substring(change.index)\n                break\n            case 'rm':\n                str = str.substring(0, change.index) + str.substring(change.index + len)\n                break\n        }\n    })\n    return str\n}\n\nfunction getPatches(changes: diff.Change[]) {\n    let index = 0\n    const patches = changes\n        .map(change => {\n            const { added: add, removed: rm, value, count } = change\n            const len = count || 0\n            if (add) {\n                const ret = {\n                    index,\n                    type: 'add',\n                    value\n                }\n                index += len\n                return ret\n            } else if (rm) {\n                const ret = {\n                    index,\n                    type: 'rm',\n                    len\n                }\n                return ret\n            }\n            index += len\n        })\n        .filter(Boolean)\n\n    return patches as Array<{\n        index: number\n        type: 'add' | 'rm'\n        value?: string\n        len?: number\n    }>\n}\n\nexport function isNumeric(n: string) {\n    return !isNaN(parseFloat(n)) && isFinite(parseFloat(n))\n}\n\nexport function throttle(func: Function, wait: number, options: { leading?: boolean; trailing?: boolean } = {}): any {\n    let context: any\n    let args: any\n    let result: any\n    let timeout: any = null\n    let previous = 0\n\n    const later = function () {\n        previous = options.leading === false ? 0 : Date.now()\n        timeout = null\n        result = func.apply(context, args)\n        if (!timeout) context = args = null\n    }\n    return function (this: any) {\n        const now = Date.now()\n        if (!previous && options.leading === false) previous = now\n        const remaining = wait - (now - previous)\n        context = this\n        args = arguments\n        if (remaining <= 0 || remaining > wait) {\n            if (timeout) {\n                clearTimeout(timeout)\n                timeout = null\n            }\n            previous = now\n            result = func.apply(context, args)\n            if (!timeout) context = args = null\n        } else if (!timeout && options.trailing !== false) {\n            timeout = setTimeout(later, remaining)\n        }\n        return result\n    }\n}\n\ntype Procedure = (...args: any[]) => void\n\ntype Options = {\n    isImmediate?: boolean\n\n    // not standard\n    isTrailing?: boolean\n}\n\nexport function debounce<F extends Procedure>(\n    func: F,\n    waitMilliseconds: number,\n    options: Options = {\n        isImmediate: false,\n        isTrailing: false\n    }\n): (this: ThisParameterType<F>, ...args: Parameters<F>) => void {\n    let timeoutId: ReturnType<typeof setTimeout> | undefined\n\n    return function (this: ThisParameterType<F>, ...args: Parameters<F>) {\n        const context = this\n\n        const doLater = function () {\n            timeoutId = undefined\n            if (!options.isImmediate || options.isTrailing) {\n                func.apply(context, args)\n            }\n        }\n\n        const shouldCallNow = options.isImmediate && timeoutId === undefined\n\n        if (timeoutId !== undefined) {\n            clearTimeout(timeoutId)\n        }\n\n        timeoutId = setTimeout(doLater, waitMilliseconds)\n\n        if (shouldCallNow) {\n            func.apply(context, args)\n        }\n    }\n}\n\nexport function createURL(url: string, base?: string) {\n    try {\n        return new URL(url, base)\n    } catch (e) {\n        logError(e)\n    }\n    return { href: url, pathname: url }\n}\n\nexport function stateDebounce<T extends string | boolean | number>(\n    stateHandle: (setState: (state: T) => void) => void,\n    delay: ((state: T) => number) | number,\n    initState?: T\n) {\n    let preState = initState\n    let timer = 0\n    return (cb: (state: T) => void) => {\n        stateHandle(delayExec)\n\n        function delayExec(state: T) {\n            if (timer) {\n                clearTimeout(timer)\n            }\n\n            timer = window.setTimeout(\n                () => {\n                    if (preState === state) {\n                        return\n                    }\n                    cb(state)\n                    preState = state\n                    clearTimeout(timer)\n                    timer = 0\n                },\n                typeof delay === 'number' ? delay : delay(state)\n            )\n        }\n    }\n}\n\nexport function logBadge(opts: { title: string; content: string; titleColor?: string; backgroundColor?: string }) {\n    const { title, content, titleColor, backgroundColor } = opts\n    const tColor = titleColor || '#606060'\n    const bColor = backgroundColor || '#1475b2'\n    const args = [\n        '%c '.concat(title, ' %c ').concat(content, ' '),\n        'padding: 1px; border-radius: 3px 0 0 3px; color: #fff; background: '.concat(tColor, ';'),\n        'padding: 1px; border-radius: 0 3px 3px 0; color: #fff; background: '.concat(bColor, ';')\n    ]\n    console.log.apply(void 0, args)\n}\n\nexport function logInfo() {\n    logBadge({ title: name, content: version });\n    logBadge({ title: 'homepage', content: homepage })\n}\n\nexport function removeGlobalVariables() {\n    const keys = Object.keys(window)\n    const targetKeys = keys.filter(key => {\n        if (key) {\n            if (key.startsWith('G_RECORD') || key.startsWith('G_REPLAY')) {\n                return true\n            }\n        }\n    }) as (keyof Window)[]\n\n    targetKeys.forEach(key => {\n        delete window[key]\n    })\n}\n\nexport function isNativeFunction(fn: Function) {\n    if (fn.toString().indexOf('[native code]') > -1) {\n        return true\n    }\n    return false\n}\n\nexport const tempEmptyFn = () => { }\nexport const tempEmptyPromise = () => Promise.resolve()\n","\nimport { logError, createURL } from './common'\n\nconst snapshot = () => window.G_REPLAY_DATA && window.G_REPLAY_DATA.snapshot.data\n\nconst href = () => snapshot()?.href || location.href\n\nexport function isCommentNode(node: Node) {\n    return node.nodeType === Node.COMMENT_NODE\n}\n\nexport function isElementNode(node: Node) {\n    return node.nodeType === Node.ELEMENT_NODE\n}\n\nexport function isTextNode(node: Node) {\n    return node.nodeType === Node.TEXT_NODE\n}\n\nexport function filteringScriptTag(str: string) {\n    const reg = /<\\/script>/g\n    return str.replace(reg, '<\\\\/script>')\n}\n\nexport function completeCssHref(str: string, baseUrl?: string, setHref?: (url: string) => string) {\n    return str.replace(/(url\\(['\"]?((\\/{1,2}|\\.\\.?\\/)?.*?)(^\\?.*?)?['\"]?(?=\\)))/g, (string, b, url) => {\n        const newUrl = createURL(url, baseUrl || href())\n        if (url.startsWith('data:')) {\n            return string\n        }\n        return string.replace(url, setHref ? setHref(newUrl.href) : newUrl.href)\n    })\n}\n\nexport function completeAttrHref(str: string, node?: Element) {\n    if (str.startsWith('data')) {\n        return str\n    }\n\n    if (node) {\n        setTimeout(() => {\n            const doc = node.getRootNode() as Document\n            const context = doc.defaultView as Window\n\n            const { href, path } = context?.G_REPLAY_LOCATION || {}\n\n            if (path && href) {\n                const relationHref = createURL(path, href).href\n                const attrs = node.getAttributeNames()\n                attrs\n                    .filter(key => ~['src', 'href'].indexOf(key))\n                    .forEach(key => {\n                        const newHref = createURL(str, relationHref).href\n                        if (node.getAttribute(key) !== newHref) {\n                            node.setAttribute(key, newHref)\n                        }\n                    })\n            }\n        })\n    }\n    return createURL(str, href()).href\n}\n\nexport function isHideComment(node: Node | null) {\n    if (!node) {\n        return false\n    }\n    return node.nodeType === Node.COMMENT_NODE && node.textContent === 'hidden'\n}\n\nexport function isExistingNode(node: Node) {\n    return node.ownerDocument && !!node.ownerDocument.contains(node)\n}\n\nexport async function getRawScriptContent(src: string) {\n    if (!src) {\n        return false\n    }\n    if (src.length > 500) {\n        return false\n    }\n\n    const fullSrc = completeAttrHref(src)\n\n    if (isValidUrl(fullSrc)) {\n        try {\n            return await getScript(fullSrc)\n        } catch (err) {\n            // handle cross error\n            return false\n        }\n    }\n\n    return false\n}\n\nfunction isValidUrl(url: string) {\n    try {\n        new URL(url)\n    } catch (_) {\n        return false\n    }\n    return true\n}\n\nexport async function getScript(src: string) {\n    return await fetch(src).then(\n        async res => filteringScriptTag(await res.text()),\n        reason => {\n            logError(reason)\n            return src\n        }\n    )\n}\n","\nimport { AudioOptionsData } from '../../types'\n\nfunction encodePCM(bufferData: Float32Array, opts: AudioOptionsData) {\n    const { sampleBits } = opts\n    const isLittleEndian = true\n    const length = bufferData.length * (sampleBits / 8)\n    const data = new DataView(new ArrayBuffer(length))\n    let offset = 0\n\n    if (sampleBits === 8) {\n        for (let i = 0; i < bufferData.length; i++, offset++) {\n            const s = Math.max(-1, Math.min(1, bufferData[i]))\n            let val = s < 0 ? s * 128 : s * 127\n            val = +val + 128\n            data.setInt8(offset, val)\n        }\n    } else {\n        for (let i = 0; i < bufferData.length; i++, offset += 2) {\n            const s = Math.max(-1, Math.min(1, bufferData[i]))\n            data.setInt16(offset, s < 0 ? s * 0x8000 : s * 0x7fff, isLittleEndian)\n        }\n    }\n\n    return data\n}\n\nexport function encodeWAV(data: Float32Array[], opts: AudioOptionsData) {\n    const dataView = encodeAudioData(data, opts)\n    const blob = new Blob([dataView], {\n        type: 'audio/wav'\n    })\n\n    return blob\n}\n\nexport function encodeAudioData(data: Float32Array[], opts: AudioOptionsData) {\n    const PMC = encodePCM(mergeArray(data), opts)\n    return createWavFile(PMC, opts)\n}\n\nfunction mergeArray(list: Float32Array[]) {\n    const length = list.length * list[0].length\n    const data = new Float32Array(length)\n    let offset = 0\n    for (let i = 0; i < list.length; i++) {\n        data.set(list[i], offset)\n        offset += list[i].length\n    }\n    return data\n}\n\nfunction createWavFile(audioData: DataView, { channelCount, sampleBits, sampleRate }: AudioOptionsData) {\n    const WAV_HEAD_SIZE = 44\n    const buffer = new ArrayBuffer(WAV_HEAD_SIZE + audioData.byteLength)\n    const isLittleEndian = true\n    // control buffer\n    const view = new DataView(buffer)\n    // write head\n    // RIFF chunk descriptor/identifier\n    writeUTFBytes(view, 0, 'RIFF')\n    // RIFF chunk length\n    view.setUint32(4, 36 + audioData.byteLength * 2, isLittleEndian)\n    // RIFF type\n    writeUTFBytes(view, 8, 'WAVE')\n    // format chunk identifier\n    // FMT sub-chunk\n    writeUTFBytes(view, 12, 'fmt ')\n    // format chunk length\n    view.setUint32(16, 16, isLittleEndian)\n    // sample format (raw)\n    view.setUint16(20, 1, isLittleEndian)\n    // stereo (channels)\n    view.setUint16(22, channelCount, isLittleEndian)\n    // sample rate\n    view.setUint32(24, sampleRate, isLittleEndian)\n    // byte rate (sample rate * block align)\n    view.setUint32(28, sampleRate * channelCount * (sampleBits / 8), isLittleEndian)\n    // block align (channel count * bytes per sample)\n    view.setUint16(32, channelCount * (sampleBits / 8), isLittleEndian)\n    // bits per sample\n    view.setUint16(34, sampleBits, isLittleEndian)\n    // data sub-chunk\n    // data chunk identifier\n    writeUTFBytes(view, 36, 'data')\n    // data chunk length\n    view.setUint32(40, audioData.byteLength, isLittleEndian)\n    // view.setUint32(40, audioData.length * 2, isLittleEndian)\n\n    // write PCM\n    const length = audioData.byteLength\n    let offset = 44\n    for (let i = 0; i < length; i++) {\n        view.setUint8(offset, audioData.getUint8(i))\n        offset++\n    }\n\n    return view\n}\n\nfunction writeUTFBytes(view: DataView, offset: number, string: string) {\n    const len = string.length\n    for (let i = 0; i < len; i++) {\n        view.setUint8(offset + i, string.charCodeAt(i))\n    }\n}\n\nexport function float32ArrayToBase64(data: Float32Array) {\n    return bufferArrayToBase64(data.buffer)\n}\n\nexport function base64ToFloat32Array(str: string) {\n    return new Float32Array(base64ToBufferArray(str))\n}\n\nexport function bufferArrayToBase64(arrayBuffer: ArrayBufferLike) {\n    let binary = ''\n    const bytes = new Uint8Array(arrayBuffer)\n    const len = bytes.byteLength\n    for (let i = 0; i < len; i++) {\n        binary += String.fromCharCode(bytes[i])\n    }\n    return btoa(binary)\n}\n\nexport function base64ToBufferArray(str: string) {\n    const blob = atob(str)\n    const bLength = blob.length\n    const arrayBuffer = new ArrayBuffer(bLength)\n    const dataView = new DataView(arrayBuffer)\n    for (let i = 0; i < bLength; i++) {\n        dataView.setUint8(i, blob.charCodeAt(i))\n    }\n\n    return arrayBuffer\n}\n\nexport function uint8ArrayToAscii(array: Uint8Array) {\n    let outputStr = ''\n    const carry = 1 << 8\n    for (let i = 0; i < array.length; i++) {\n        let num = array[i]\n\n        if (~[13, 34, 39, 44, 60, 62, 92, 96, 10, 0].indexOf(num)) {\n            num += carry\n        }\n\n        outputStr += String.fromCharCode(num)\n    }\n    return outputStr\n}\n\nexport function asciiToUint8Array(str: string) {\n    const carry = 1 << 8\n    const strArray = str.split('')\n    const byteArray = new Uint8Array(strArray.length)\n    for (let i = 0; i < strArray.length; i++) {\n        const num = strArray[i].charCodeAt(0)\n        byteArray[i] = num >= carry ? num - carry : num\n    }\n    return byteArray\n}\n","\nexport class AnimationFrame {\n    requestID: number\n    fps: number\n    animate: Function\n    index = 0\n    constructor(animate: Function, fps = 60) {\n        this.fps = fps\n        this.animate = animate\n    }\n\n    public start() {\n        let then = performance.now()\n        const interval = 1000 / this.fps\n        const tolerance = 0.1\n\n        const animateLoop = (now: number) => {\n            this.requestID = requestAnimationFrame(animateLoop)\n            const delta = now - then\n\n            if (delta >= interval - tolerance) {\n                then = now - (delta % interval)\n                this.animate(delta, this.index++)\n            }\n        }\n        this.requestID = requestAnimationFrame(animateLoop)\n    }\n\n    public stop() {\n        cancelAnimationFrame(this.requestID)\n    }\n}\n","/* smoothscroll v0.4.4 - 2019 - Dustan Kasten, Jeremias Menichelli - MIT License */\n(function () {\n  'use strict';\n\n  // polyfill\n  function polyfill() {\n    // aliases\n    var w = window;\n    var d = document;\n\n    // return if scroll behavior is supported and polyfill is not forced\n    if (\n      'scrollBehavior' in d.documentElement.style &&\n      w.__forceSmoothScrollPolyfill__ !== true\n    ) {\n      return;\n    }\n\n    // globals\n    var Element = w.HTMLElement || w.Element;\n    var SCROLL_TIME = 468;\n\n    // object gathering original scroll methods\n    var original = {\n      scroll: w.scroll || w.scrollTo,\n      scrollBy: w.scrollBy,\n      elementScroll: Element.prototype.scroll || scrollElement,\n      scrollIntoView: Element.prototype.scrollIntoView\n    };\n\n    // define timing method\n    var now =\n      w.performance && w.performance.now\n        ? w.performance.now.bind(w.performance)\n        : Date.now;\n\n    /**\n     * indicates if a the current browser is made by Microsoft\n     * @method isMicrosoftBrowser\n     * @param {String} userAgent\n     * @returns {Boolean}\n     */\n    function isMicrosoftBrowser(userAgent) {\n      var userAgentPatterns = ['MSIE ', 'Trident/', 'Edge/'];\n\n      return new RegExp(userAgentPatterns.join('|')).test(userAgent);\n    }\n\n    /*\n     * IE has rounding bug rounding down clientHeight and clientWidth and\n     * rounding up scrollHeight and scrollWidth causing false positives\n     * on hasScrollableSpace\n     */\n    var ROUNDING_TOLERANCE = isMicrosoftBrowser(w.navigator.userAgent) ? 1 : 0;\n\n    /**\n     * changes scroll position inside an element\n     * @method scrollElement\n     * @param {Number} x\n     * @param {Number} y\n     * @returns {undefined}\n     */\n    function scrollElement(x, y) {\n      this.scrollLeft = x;\n      this.scrollTop = y;\n    }\n\n    /**\n     * returns result of applying ease math function to a number\n     * @method ease\n     * @param {Number} k\n     * @returns {Number}\n     */\n    function ease(k) {\n      return 0.5 * (1 - Math.cos(Math.PI * k));\n    }\n\n    /**\n     * indicates if a smooth behavior should be applied\n     * @method shouldBailOut\n     * @param {Number|Object} firstArg\n     * @returns {Boolean}\n     */\n    function shouldBailOut(firstArg) {\n      if (\n        firstArg === null ||\n        typeof firstArg !== 'object' ||\n        firstArg.behavior === undefined ||\n        firstArg.behavior === 'auto' ||\n        firstArg.behavior === 'instant'\n      ) {\n        // first argument is not an object/null\n        // or behavior is auto, instant or undefined\n        return true;\n      }\n\n      if (typeof firstArg === 'object' && firstArg.behavior === 'smooth') {\n        // first argument is an object and behavior is smooth\n        return false;\n      }\n\n      // throw error when behavior is not supported\n      throw new TypeError(\n        'behavior member of ScrollOptions ' +\n          firstArg.behavior +\n          ' is not a valid value for enumeration ScrollBehavior.'\n      );\n    }\n\n    /**\n     * indicates if an element has scrollable space in the provided axis\n     * @method hasScrollableSpace\n     * @param {Node} el\n     * @param {String} axis\n     * @returns {Boolean}\n     */\n    function hasScrollableSpace(el, axis) {\n      if (axis === 'Y') {\n        return el.clientHeight + ROUNDING_TOLERANCE < el.scrollHeight;\n      }\n\n      if (axis === 'X') {\n        return el.clientWidth + ROUNDING_TOLERANCE < el.scrollWidth;\n      }\n    }\n\n    /**\n     * indicates if an element has a scrollable overflow property in the axis\n     * @method canOverflow\n     * @param {Node} el\n     * @param {String} axis\n     * @returns {Boolean}\n     */\n    function canOverflow(el, axis) {\n      var overflowValue = w.getComputedStyle(el, null)['overflow' + axis];\n\n      return overflowValue === 'auto' || overflowValue === 'scroll';\n    }\n\n    /**\n     * indicates if an element can be scrolled in either axis\n     * @method isScrollable\n     * @param {Node} el\n     * @param {String} axis\n     * @returns {Boolean}\n     */\n    function isScrollable(el) {\n      var isScrollableY = hasScrollableSpace(el, 'Y') && canOverflow(el, 'Y');\n      var isScrollableX = hasScrollableSpace(el, 'X') && canOverflow(el, 'X');\n\n      return isScrollableY || isScrollableX;\n    }\n\n    /**\n     * finds scrollable parent of an element\n     * @method findScrollableParent\n     * @param {Node} el\n     * @returns {Node} el\n     */\n    function findScrollableParent(el) {\n      while (el !== d.body && isScrollable(el) === false) {\n        el = el.parentNode || el.host;\n      }\n\n      return el;\n    }\n\n    /**\n     * self invoked function that, given a context, steps through scrolling\n     * @method step\n     * @param {Object} context\n     * @returns {undefined}\n     */\n    function step(context) {\n      var time = now();\n      var value;\n      var currentX;\n      var currentY;\n      var elapsed = (time - context.startTime) / SCROLL_TIME;\n\n      // avoid elapsed times higher than one\n      elapsed = elapsed > 1 ? 1 : elapsed;\n\n      // apply easing to elapsed time\n      value = ease(elapsed);\n\n      currentX = context.startX + (context.x - context.startX) * value;\n      currentY = context.startY + (context.y - context.startY) * value;\n\n      context.method.call(context.scrollable, currentX, currentY);\n\n      // scroll more if we have not reached our destination\n      if (currentX !== context.x || currentY !== context.y) {\n        w.requestAnimationFrame(step.bind(w, context));\n      }\n    }\n\n    /**\n     * scrolls window or element with a smooth behavior\n     * @method smoothScroll\n     * @param {Object|Node} el\n     * @param {Number} x\n     * @param {Number} y\n     * @returns {undefined}\n     */\n    function smoothScroll(el, x, y) {\n      var scrollable;\n      var startX;\n      var startY;\n      var method;\n      var startTime = now();\n\n      // define scroll context\n      if (el === d.body) {\n        scrollable = w;\n        startX = w.scrollX || w.pageXOffset;\n        startY = w.scrollY || w.pageYOffset;\n        method = original.scroll;\n      } else {\n        scrollable = el;\n        startX = el.scrollLeft;\n        startY = el.scrollTop;\n        method = scrollElement;\n      }\n\n      // scroll looping over a frame\n      step({\n        scrollable: scrollable,\n        method: method,\n        startTime: startTime,\n        startX: startX,\n        startY: startY,\n        x: x,\n        y: y\n      });\n    }\n\n    // ORIGINAL METHODS OVERRIDES\n    // w.scroll and w.scrollTo\n    w.scroll = w.scrollTo = function() {\n      // avoid action when no arguments are passed\n      if (arguments[0] === undefined) {\n        return;\n      }\n\n      // avoid smooth behavior if not required\n      if (shouldBailOut(arguments[0]) === true) {\n        original.scroll.call(\n          w,\n          arguments[0].left !== undefined\n            ? arguments[0].left\n            : typeof arguments[0] !== 'object'\n              ? arguments[0]\n              : w.scrollX || w.pageXOffset,\n          // use top prop, second argument if present or fallback to scrollY\n          arguments[0].top !== undefined\n            ? arguments[0].top\n            : arguments[1] !== undefined\n              ? arguments[1]\n              : w.scrollY || w.pageYOffset\n        );\n\n        return;\n      }\n\n      // LET THE SMOOTHNESS BEGIN!\n      smoothScroll.call(\n        w,\n        d.body,\n        arguments[0].left !== undefined\n          ? ~~arguments[0].left\n          : w.scrollX || w.pageXOffset,\n        arguments[0].top !== undefined\n          ? ~~arguments[0].top\n          : w.scrollY || w.pageYOffset\n      );\n    };\n\n    // w.scrollBy\n    w.scrollBy = function() {\n      // avoid action when no arguments are passed\n      if (arguments[0] === undefined) {\n        return;\n      }\n\n      // avoid smooth behavior if not required\n      if (shouldBailOut(arguments[0])) {\n        original.scrollBy.call(\n          w,\n          arguments[0].left !== undefined\n            ? arguments[0].left\n            : typeof arguments[0] !== 'object' ? arguments[0] : 0,\n          arguments[0].top !== undefined\n            ? arguments[0].top\n            : arguments[1] !== undefined ? arguments[1] : 0\n        );\n\n        return;\n      }\n\n      // LET THE SMOOTHNESS BEGIN!\n      smoothScroll.call(\n        w,\n        d.body,\n        ~~arguments[0].left + (w.scrollX || w.pageXOffset),\n        ~~arguments[0].top + (w.scrollY || w.pageYOffset)\n      );\n    };\n\n    // Element.prototype.scroll and Element.prototype.scrollTo\n    Element.prototype.scroll = Element.prototype.scrollTo = function() {\n      // avoid action when no arguments are passed\n      if (arguments[0] === undefined) {\n        return;\n      }\n\n      // avoid smooth behavior if not required\n      if (shouldBailOut(arguments[0]) === true) {\n        // if one number is passed, throw error to match Firefox implementation\n        if (typeof arguments[0] === 'number' && arguments[1] === undefined) {\n          throw new SyntaxError('Value could not be converted');\n        }\n\n        original.elementScroll.call(\n          this,\n          // use left prop, first number argument or fallback to scrollLeft\n          arguments[0].left !== undefined\n            ? ~~arguments[0].left\n            : typeof arguments[0] !== 'object' ? ~~arguments[0] : this.scrollLeft,\n          // use top prop, second argument or fallback to scrollTop\n          arguments[0].top !== undefined\n            ? ~~arguments[0].top\n            : arguments[1] !== undefined ? ~~arguments[1] : this.scrollTop\n        );\n\n        return;\n      }\n\n      var left = arguments[0].left;\n      var top = arguments[0].top;\n\n      // LET THE SMOOTHNESS BEGIN!\n      smoothScroll.call(\n        this,\n        this,\n        typeof left === 'undefined' ? this.scrollLeft : ~~left,\n        typeof top === 'undefined' ? this.scrollTop : ~~top\n      );\n    };\n\n    // Element.prototype.scrollBy\n    Element.prototype.scrollBy = function() {\n      // avoid action when no arguments are passed\n      if (arguments[0] === undefined) {\n        return;\n      }\n\n      // avoid smooth behavior if not required\n      if (shouldBailOut(arguments[0]) === true) {\n        original.elementScroll.call(\n          this,\n          arguments[0].left !== undefined\n            ? ~~arguments[0].left + this.scrollLeft\n            : ~~arguments[0] + this.scrollLeft,\n          arguments[0].top !== undefined\n            ? ~~arguments[0].top + this.scrollTop\n            : ~~arguments[1] + this.scrollTop\n        );\n\n        return;\n      }\n\n      this.scroll({\n        left: ~~arguments[0].left + this.scrollLeft,\n        top: ~~arguments[0].top + this.scrollTop,\n        behavior: arguments[0].behavior\n      });\n    };\n\n    // Element.prototype.scrollIntoView\n    Element.prototype.scrollIntoView = function() {\n      // avoid smooth behavior if not required\n      if (shouldBailOut(arguments[0]) === true) {\n        original.scrollIntoView.call(\n          this,\n          arguments[0] === undefined ? true : arguments[0]\n        );\n\n        return;\n      }\n\n      // LET THE SMOOTHNESS BEGIN!\n      var scrollableParent = findScrollableParent(this);\n      var parentRects = scrollableParent.getBoundingClientRect();\n      var clientRects = this.getBoundingClientRect();\n\n      if (scrollableParent !== d.body) {\n        // reveal element inside parent\n        smoothScroll.call(\n          this,\n          scrollableParent,\n          scrollableParent.scrollLeft + clientRects.left - parentRects.left,\n          scrollableParent.scrollTop + clientRects.top - parentRects.top\n        );\n\n        // reveal parent in viewport unless is fixed\n        if (w.getComputedStyle(scrollableParent).position !== 'fixed') {\n          w.scrollBy({\n            left: parentRects.left,\n            top: parentRects.top,\n            behavior: 'smooth'\n          });\n        }\n      } else {\n        // reveal element in viewport\n        w.scrollBy({\n          left: clientRects.left,\n          top: clientRects.top,\n          behavior: 'smooth'\n        });\n      }\n    };\n  }\n\n  if (typeof exports === 'object' && typeof module !== 'undefined') {\n    // commonjs\n    module.exports = { polyfill: polyfill };\n  } else {\n    // global\n    polyfill();\n  }\n\n}());\n","\n/**\n * Reference: https://developers.google.com/web/tools/lighthouse/audits/first-meaningful-paint\n * TODO FMP (first Meaningful Paint) TODO\n */\nexport class FMP {\n  interval = 1000\n  len = 0\n  resolved = false\n  listener: Array<() => void> = []\n  timer: null | number = null\n  constructor() {\n    this.observe()\n  }\n\n  private clearTimer() {\n    if (this.timer) {\n      clearTimeout(this.timer)\n      this.timer = null\n    }\n  }\n\n  destroy() {\n    this.listener.length = 0\n  }\n\n  observe() {\n    this.timer = window.setTimeout(() => {\n      const entries = performance\n        .getEntriesByType('resource')\n        .filter((item: PerformanceResourceTiming) => this.isMatchType(item))\n      const len = entries.length\n      if (len <= this.len) {\n        performance.clearResourceTimings()\n        this.clearTimer()\n        this.resolved = true\n        if (this.listener.length) {\n          this.listener.forEach(run => run())\n        }\n        return\n      }\n      this.len = len\n      this.observe()\n    }, this.interval)\n  }\n\n  isMatchType(entry: PerformanceResourceTiming) {\n    switch (entry.initiatorType) {\n      case 'link':\n      case 'img':\n      case 'css':\n      case 'iframe':\n        return true\n      default:\n        break\n    }\n  }\n\n  ready(fn: () => void) {\n    if (this.resolved) {\n      return fn()\n    }\n    this.listener.push(fn)\n  }\n}\n","\nimport { PlayerEventTypes } from '../types'\n\nclass Observer<T extends string> {\n    id = 1\n    listenersMap = new Map<T, Map<number, Function>>()\n\n    public on(key: T, fn: Function): number {\n        const map = this.getListenersByKey(key)\n        map.set(++this.id, fn)\n        return this.id\n    }\n\n    public emit(key: T, ...args: any): void {\n        this.getListenersByKey(key).forEach(fn => {\n            fn(...args)\n        })\n    }\n\n    public once(key: T, fn: Function): number {\n        const onceFunc = (...args: any) => {\n            fn(...args)\n            this.off(key, id)\n        }\n        const id = this.on(key, onceFunc)\n        return id\n    }\n\n    public flush(key: T): void {\n        this.getListenersByKey(key).clear()\n    }\n\n    public destroy(): void {\n        this.listenersMap.clear()\n    }\n\n    private off(key: T, id: number): void {\n        const map = this.getListenersByKey(key)\n        map.delete(id)\n    }\n\n    private getListenersByKey(key: T): Map<number, Function> {\n        const map = this.listenersMap.get(key) || new Map<number, Function>()\n        this.listenersMap.set(key, map)\n        return map\n    }\n}\n\nexport const observer = new Observer<PlayerEventTypes>()\n","\nimport { Action, State, RootReducer } from './types'\n\nexport function createStore(reducer: RootReducer) {\n    let state = reducer({} as State)\n    const listeners: Array<(state: State) => void> = []\n\n    function unsubscribe() {\n        listeners.length = 0\n        dispatch({ type: 'RESET', data: {} })\n    }\n\n    function subscribe(listener: (state: State) => void): void {\n        listeners.push(listener)\n    }\n\n    function dispatch(action: Action) {\n        state = reducer(state, action)\n\n        listeners.forEach(listener => {\n            listener(state)\n        })\n    }\n\n    function getState(): State {\n        return state\n    }\n\n    return {\n        unsubscribe,\n        subscribe,\n        dispatch,\n        getState\n    }\n}\n","\nimport { Action, SubReducer } from './types'\nimport { State } from './types'\nexport function combineReducers(reducers: { [key: string]: SubReducer }) {\n    const reducerKeys = Object.keys(reducers)\n    return function combination(state: State, action: Action) {\n        const nextState = {} as State\n\n        for (let i = 0; i < reducerKeys.length; i++) {\n            const key = reducerKeys[i] as keyof State\n\n            const reducer = reducers[key]\n\n            const previousStateForKey = state[key]\n\n            const nextStateForKey = reducer(previousStateForKey, action)\n\n            nextState[key] = nextStateForKey as any\n        }\n        return nextState\n    }\n}\n","\nconst initState = {\n    startTime: 0,\n    endTime: 0,\n    duration: 0,\n    packsInfo: [] as {\n        startTime: number\n        endTime: number\n        duration: number\n        diffTime: number\n    }[]\n}\n\nexport type ProgressState = typeof initState\n\nexport enum ProgressReducerTypes {\n    RESET = 'RESET',\n    PROGRESS = 'PROGRESS'\n}\n\nexport function ProgressReducer(state: ProgressState, action: { type: string; data: Partial<ProgressState> }) {\n    if (!state) {\n        state = initState\n    }\n\n    if (!action) {\n        return state\n    }\n\n    const { type, data } = action\n\n    switch (type) {\n        case ProgressReducerTypes.PROGRESS:\n            return {\n                ...state,\n                ...data\n            }\n        case ProgressReducerTypes.RESET:\n            return { ...initState }\n        default:\n            return state\n    }\n}\n","\nimport { ReplayOptions } from '../../../../types'\n\nconst initState = {\n    speed: 0,\n    options: {} as ReplayOptions\n}\n\nexport type PlayerState = typeof initState\n\nexport enum PlayerReducerTypes {\n    RESET = 'RESET',\n    SPEED = 'SPEED',\n    OPTIONS = 'OPTIONS'\n}\n\nexport function PlayerReducer(\n    state: typeof initState,\n    action: { type: PlayerReducerTypes; data: Partial<typeof initState> }\n) {\n    if (!state) {\n        state = initState\n    }\n\n    if (!action) {\n        return state\n    }\n\n    const { type, data } = action\n\n    switch (type) {\n        case PlayerReducerTypes.OPTIONS:\n            return {\n                ...state,\n                options: data.options!\n            }\n        case PlayerReducerTypes.SPEED:\n            return {\n                ...state,\n                speed: data.speed!\n            }\n        case PlayerReducerTypes.RESET:\n            return { ...initState }\n        default:\n            return state\n    }\n}\n","import { AudioOptionsData, AudioRecord, AudioStrList, RecordData, RecordType } from '../../types'\nimport { base64ToFloat32Array, encodeAudioData } from '../../utils'\n\nexport function getPacks(records: RecordData[]) {\n    const packs: RecordData[][] = []\n    const pack: RecordData[] = []\n\n    records.forEach((record, i) => {\n        if (i && record.type === RecordType.HEAD) {\n            packs.push(pack.slice())\n            pack.length = 0\n        }\n        pack.push(record)\n\n        if (records.length - 1 === i) {\n            packs.push(pack)\n        }\n    })\n\n    return packs\n}\n\nexport function convertAudioBuffer(audioRecords: AudioRecord<AudioStrList>[]): DataView {\n    const bufferStrList: string[] = []\n    audioRecords.forEach(record => {\n        const { data } = record.data\n        bufferStrList.push(...data)\n    })\n\n    const dataArray: Float32Array[] = []\n    for (let i = 0; i < bufferStrList.length; i++) {\n        const data = base64ToFloat32Array(bufferStrList[i])\n        dataArray.push(data)\n    }\n\n    const opts = {\n        sampleBits: 8,\n        channelCount: 1,\n        sampleRate: 48000\n    } as AudioOptionsData\n\n    return encodeAudioData(dataArray, opts)\n}\n","\nimport { RecordData, ReplayData } from '../../../../types'\nimport { getPacks } from '../../transform'\n\nconst initState = {\n    records: [] as RecordData[],\n    packs: [] as RecordData[][],\n    currentData: {} as ReplayData\n}\n\nexport type ReplayDataState = typeof initState\n\nexport enum ReplayDataReducerTypes {\n    RESET = 'RESET',\n    UPDATE_DATA = 'UPDATE_DATA',\n    APPEND_RECORDS = 'APPEND_RECORDS'\n}\n\nexport function ReplayDataReducer(\n    state: typeof initState,\n    action: { type: ReplayDataReducerTypes; data: Partial<typeof initState> }\n) {\n    if (!state) {\n        state = initState\n    }\n\n    if (!action) {\n        return state\n    }\n\n    const { type, data } = action\n\n    switch (type) {\n        case ReplayDataReducerTypes.APPEND_RECORDS:\n            const records = state.records\n            records.push(...data.records!)\n            const packs = getPacks(records)\n            state.packs = packs\n            return state\n        case ReplayDataReducerTypes.UPDATE_DATA:\n            if (data.currentData && data.currentData) {\n                window.G_REPLAY_DATA = data.currentData\n            }\n            return {\n                ...state,\n                ...data\n            }\n        case ReplayDataReducerTypes.RESET:\n            return { ...initState }\n        default:\n            return state\n    }\n}\n","\nimport { createStore } from './create-store'\nimport { combineReducers } from './combine-reducers'\nimport { ProgressReducer } from './reducers/progress'\nimport { PlayerReducer } from './reducers/player'\nimport { ReplayDataReducer } from './reducers/replay-data'\n\nconst reducer = combineReducers({\n    player: PlayerReducer,\n    progress: ProgressReducer,\n    replayData: ReplayDataReducer\n})\n\nexport const Store = createStore(reducer)\nexport * from './reducers'\n","'use strict'\n\nmodule.exports = isMobile\nmodule.exports.isMobile = isMobile\nmodule.exports.default = isMobile\n\nconst mobileRE = /(android|bb\\d+|meego).+mobile|armv7l|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series[46]0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i\n\nconst tabletRE = /android|ipad|playbook|silk/i\n\nfunction isMobile (opts) {\n  if (!opts) opts = {}\n  let ua = opts.ua\n  if (!ua && typeof navigator !== 'undefined') ua = navigator.userAgent\n  if (ua && ua.headers && typeof ua.headers['user-agent'] === 'string') {\n    ua = ua.headers['user-agent']\n  }\n  if (typeof ua !== 'string') return false\n\n  let result = mobileRE.test(ua) || (!!opts.tablet && tabletRE.test(ua))\n\n  if (\n    !result &&\n    opts.tablet &&\n    opts.featureDetect &&\n    navigator &&\n    navigator.maxTouchPoints > 1 &&\n    ua.indexOf('Macintosh') !== -1 &&\n    ua.indexOf('Safari') !== -1\n  ) {\n    result = true\n  }\n\n  return result\n}\n","\nimport { completeAttrHref, completeCssHref, logError } from '../utils'\n\nconst ignoreNodeNames = ['VIDEO', 'IFRAME']\n\nexport function setAttribute(node: HTMLElement, name: string, value: string | boolean | null | object): void {\n    if (node.nodeType !== Node.ELEMENT_NODE) {\n        return\n    }\n    if (name === 'style') {\n        if (typeof value === 'string') {\n            node.style.cssText = completeCssHref(value)\n        } else if (value !== null && typeof value === 'object') {\n            for (const [k, v] of Object.entries(value)) {\n                if (k[0] === '-') {\n                    node.style.setProperty(k, v as any)\n                } else {\n                    node.style[k as any] = v as any\n                }\n            }\n        }\n        return\n    }\n\n    if (name === 'src' && ~ignoreNodeNames.indexOf(node.tagName)) {\n        return\n    }\n\n    // for disabled js prefetch\n    if (value && typeof value === 'string' && /\\.js$/.test(value)) {\n        return\n    }\n\n    if (/^\\d+/.test(name)) {\n        return\n    }\n\n    if (/^on\\w+$/.test(name)) {\n        return\n    }\n\n    if (value === null) {\n        return node.removeAttribute(name)\n    }\n\n    value = String(value)\n\n    if (name === 'href') {\n        value = completeAttrHref(String(value), node)\n    }\n\n    if (name === 'background' || name === 'src') {\n        if (value.startsWith('data:')) {\n            // skip\n        } else {\n            value = completeAttrHref(String(value), node)\n        }\n    }\n\n    // The srcset attribute specifies the URL of the image to use in different situations\n    if (name === 'srcset') {\n        const srcArray = value.split(',')\n        value = srcArray\n            .map(src => {\n                const [url, size] = src.trim().split(' ')\n                if (url && size) {\n                    return `${completeAttrHref(url, node)} ${size}`\n                }\n                if (url) {\n                    return completeAttrHref(url, node)\n                }\n                return ''\n            })\n            .join(', ')\n        // decode uri\n        value = decodeURIComponent(value)\n    }\n\n    if (value.startsWith('/')) {\n        value = completeAttrHref(value, node)\n    }\n\n    try {\n        node.setAttribute(name, value)\n    } catch (err) {\n        logError(err)\n    }\n}\n","\nimport { setAttribute } from './dom'\nimport { nodeStore, isDev, isHideComment, completeCssHref } from '../utils'\nimport { VNode, VSNode } from '../types'\n\nexport function convertVNode(vNode: VNode | VSNode | null, parent?: VNode): Element | null {\n    if (vNode === null || vNode === undefined) {\n        return null\n    }\n    const vs = vNode as VSNode\n    if (vNode.type === Node.COMMENT_NODE) {\n        return createCommentNode(vs) as Element\n    }\n    if (vNode.type === Node.TEXT_NODE) {\n        if (parent && parent.tag === 'style') {\n            const baseUrl = parent?.attrs['css-url']\n            vs.value = completeCssHref(vs.value, baseUrl)\n        }\n        return createText(vs) as Element\n    }\n    const vn = vNode as VNode\n    const output = createNode(vn)\n\n    if ((vn.children && vn.children.length) || (output.childNodes && output.childNodes.length)) {\n        travel(vn, output)\n    }\n\n    return output\n}\n\nfunction travel(vNode: VNode, node: Element): void {\n    const nodeChildren: Element[] = []\n    const vNodeChildren = vNode.children.slice()\n    vNodeChildren.forEach(vChild => {\n        let child = nodeChildren.pop() as Element | null\n        child = convertVNode(vChild, vNode)\n        if (child) {\n            if (isHideComment(node.lastChild)) {\n                setAttribute(child as HTMLElement, 'style', 'visibility: hidden')\n            }\n            node.appendChild(child)\n        }\n    })\n}\n\nfunction createProps(vNode: VNode, node: Element): void {\n    const { props } = vNode.extra\n    if (props) {\n        for (const [key, val] of Object.entries(props)) {\n            if (key === 'scroll') {\n                const { left, top } = val as { top: number; left: number }\n                // TODO\n                // when the inserted element onload?\n                setTimeout(() => {\n                    node.scrollTop = top\n                    node.scrollLeft = left\n                }, 1000)\n            } else {\n                ;(node as any)[key] = val\n            }\n        }\n    }\n}\n\nfunction createAttributes(vNode: VNode, node: Element): void {\n    const attrs = getAttributes(vNode)\n\n    for (const [name, val] of Object.entries(attrs)) {\n        setAttribute(node as HTMLElement, name, val)\n    }\n    if (vNode.tag === 'a') {\n        node.setAttribute('target', '_blank')\n    }\n}\n\nfunction getAttributes(vNode: VNode) {\n    const attrs = { ...vNode.attrs }\n    return attrs\n}\n\nexport function createSpecialNode(vsNode: VSNode) {\n    const { type, value, id } = vsNode\n\n    let output: Node\n\n    switch (type) {\n        case Node.TEXT_NODE:\n            output = document.createTextNode(value)\n            break\n        case Node.COMMENT_NODE:\n            output = document.createComment(value)\n            break\n    }\n    nodeStore.updateNode(id, output!)\n    return output!\n}\n\nexport function createNode(vNode: VNode): Element {\n    const { id, extra } = vNode\n    const { isSVG } = extra\n    let output: Element\n    const tagName = transformTagName(vNode.tag)\n    if (isSVG) {\n        output = document.createElementNS('http://www.w3.org/2000/svg', tagName)\n    } else {\n        output = document.createElement(tagName)\n    }\n\n    if (isDev) {\n        setAttribute(output as HTMLElement, 'vid', id.toString())\n    }\n    createAttributes(vNode, output)\n    createProps(vNode, output)\n    nodeStore.updateNode(id, output)\n    return output\n}\n\nfunction transformTagName(tag: string) {\n    const tagMap: { [key: string]: string } = {\n        // script deactivated\n        script: 'noscript',\n\n        // SVG transform tagName\n        altglyph: 'altGlyph',\n        altglyphdef: 'altGlyphDef',\n        altglyphitem: 'altGlyphItem',\n        animatecolor: 'animateColor',\n        animatemotion: 'animateMotion',\n        animatetransform: 'animateTransform',\n        clippath: 'clipPath',\n        feblend: 'feBlend',\n        fecolormatrix: 'feColorMatrix',\n        fecomponenttransfer: 'feComponentTransfer',\n        fecomposite: 'feComposite',\n        feconvolvematrix: 'feConvolveMatrix',\n        fediffuselighting: 'feDiffuseLighting',\n        fedisplacementmap: 'feDisplacementMap',\n        fedistantlight: 'feDistantLight',\n        feflood: 'feFlood',\n        fefunca: 'feFuncA',\n        fefuncb: 'feFuncB',\n        fefuncg: 'feFuncG',\n        fefuncr: 'feFuncR',\n        fegaussianblur: 'feGaussianBlur',\n        feimage: 'feImage',\n        femerge: 'feMerge',\n        femergenode: 'feMergeNode',\n        femorphology: 'feMorphology',\n        feoffset: 'feOffset',\n        fepointLight: 'fePointLight',\n        fespecularlighting: 'feSpecularLighting',\n        fespotlight: 'feSpotLight',\n        fetile: 'feTile',\n        feturbulence: 'feTurbulence',\n        foreignobject: 'foreignObject',\n        lineargradient: 'linearGradient',\n        radialgradient: 'radialGradient',\n        textpath: 'textPath'\n    }\n    const tagName = tagMap[tag] || tag\n    return tagName\n}\n\nfunction createText(vs: VSNode) {\n    const { value, id } = vs\n    const output: Node = document.createTextNode(value)\n    nodeStore.updateNode(id, output)\n    return output\n}\n\nfunction createCommentNode(vs: VSNode) {\n    const { value, id } = vs\n    const output: Node = document.createComment(value)\n    nodeStore.updateNode(id, output)\n    return output\n}\n","\nimport {\n  RecordData,\n  ReplayData,\n  RecordType,\n  SnapshotRecord,\n  AudioOptionsData,\n  DBRecordData,\n  AudioRecord,\n  HeadRecord,\n  AudioStrList,\n  AudioData,\n  AudioOptions,\n  VideoData,\n  VideoRecord\n} from '../../types'\nimport { decompressWithGzipByte } from 'brick.json/gzip/esm'\nimport { delay, asciiToUint8Array, base64ToBufferArray } from '../../utils'\nimport { Store } from './redux'\nimport mobile from 'is-mobile'\nimport { ContainerComponent } from '../components/container'\nimport { convertVNode } from '../../virtual-dom'\n\nimport FIXED_CSS from '../fixed.scss' // @ts-nocheck @ts-ignore\n\nexport function download(src: Blob | string, name: string) {\n  const tag = document.createElement('a')\n  tag.download = name\n  if (typeof src === 'string') {\n    tag.href = src\n    tag.click()\n  } else {\n    tag.href = URL.createObjectURL(src)\n    tag.click()\n    URL.revokeObjectURL(tag.href)\n  }\n}\n\nexport function transToReplayData(records: RecordData[]): ReplayData {\n  function isAudioPCMStr(record: AudioStrList) {\n    return record.type === 'pcm' && record.encode === 'base64'\n  }\n  function isAudioWAVStr(record: AudioStrList) {\n    return record.type === 'wav' && record.encode === 'base64'\n  }\n\n  const audio = {\n    src: '',\n    pcmStrList: [],\n    wavStrList: [],\n    subtitles: [],\n    opts: {} as AudioOptionsData\n  }\n\n  const replayData: ReplayData = {\n    head: {} as HeadRecord,\n    snapshot: {} as SnapshotRecord,\n    records: [],\n    audio,\n    videos: [] as VideoData[]\n  }\n\n  const videosMap = new Map<number, VideoData & { bufferStrList: string[] }>()\n\n  records.forEach((record, index) => {\n    const next = records[index + 1]\n\n    if (record.type === RecordType.HEAD) {\n      if (next && !(next.data as SnapshotRecord['data']).frameId) {\n        replayData.head = record\n      }\n    } else if (record.type === RecordType.SNAPSHOT) {\n      if (!record.data.frameId) {\n        if (replayData) {\n          replayData.snapshot = record\n        }\n      } else {\n        replayData.records.push(record)\n      }\n    } else {\n      switch (record.type) {\n        case RecordType.AUDIO:\n          const { data: audioData } = record as AudioRecord\n          if ((audioData as AudioData).src) {\n            const data = audioData as AudioData\n            replayData.audio.src = data.src\n            replayData.audio.subtitles = data.subtitles\n          } else if (isAudioPCMStr(audioData as AudioStrList)) {\n            replayData.audio.pcmStrList.push(...(audioData as AudioStrList).data)\n          } else if (isAudioWAVStr(audioData as AudioStrList)) {\n            replayData.audio.wavStrList.push(...(audioData as AudioStrList).data)\n          } else {\n            replayData.audio.opts = (audioData as AudioOptions).data\n          }\n          replayData.records.push(record as RecordData)\n          break\n        case RecordType.VIDEO:\n          const { data, time } = record as VideoRecord\n          const { id, dataStr } = data\n\n          if (!dataStr) {\n            break\n          }\n\n          const videoData = videosMap.get(id)\n          if (videoData) {\n            videoData.bufferStrList.push(dataStr)\n            videoData.endTime = time\n          } else {\n            const newVideoData = {\n              id,\n              startTime: time,\n              endTime: time,\n              bufferStrList: [dataStr]\n            } as VideoData & { bufferStrList: string[] }\n            videosMap.set(id, newVideoData)\n          }\n          replayData.records.push(record as RecordData)\n          break\n      }\n      if (replayData) {\n        replayData.records.push(record as RecordData)\n      }\n    }\n  })\n\n  if (videosMap.size) {\n    const videos = Array.from(videosMap.entries()).map(([, video]) => {\n      const { bufferStrList, startTime, endTime, id } = video\n\n      const chunks = bufferStrList.map(str => {\n        const buffer = base64ToBufferArray(str)\n        const blob = new Blob([buffer], { type: 'video/webm;codecs=vp9' })\n        return blob\n      })\n\n      const steam = new Blob(chunks, { type: 'video/webm' })\n      const blobUrl = window.URL.createObjectURL(steam)\n\n      return {\n        id,\n        src: blobUrl,\n        startTime,\n        endTime\n      } as VideoData\n    })\n    replayData.videos.push(...videos)\n  }\n\n  return replayData\n}\n\nexport function getGZipData(): RecordData[] | null {\n  const str = window.G_REPLAY_STR_RECORDS\n  if (!str) {\n    return null\n  }\n\n  const byteArray = asciiToUint8Array(str)\n\n  return decompressWithGzipByte(byteArray) as RecordData[]\n}\n\nexport function getRecordsFromStore() {\n  const records = Store.getState().replayData.records\n  return records.length ? records : null\n}\n\nexport function parseHtmlStr(htmlStr: string) {\n  const parser = new DOMParser()\n  const children = parser.parseFromString(htmlStr, 'text/html').body.children\n  return [...children] as HTMLElement[]\n}\n\nexport function isMobile(ua?: string) {\n  if (!ua) {\n    return false\n  }\n\n  return mobile({ ua })\n}\n\nexport function showStartMask(c: ContainerComponent) {\n  const startPage = c.container.querySelector('.player-start-page')! as HTMLElement\n  startPage.setAttribute('style', '')\n}\n\nfunction showStartBtn(el: HTMLElement) {\n  const startPage = el.querySelector('.player-start-page')! as HTMLElement\n  const btn = startPage.querySelector('.play-btn') as HTMLElement\n  btn.classList.add('show')\n  return btn\n}\n\nexport function removeStartPage(el: HTMLElement) {\n  const startPage = el.querySelector('.player-start-page') as HTMLElement\n  startPage?.parentElement?.removeChild(startPage)\n}\n\nexport async function waitStart(el: HTMLElement): Promise<void> {\n  const btn = showStartBtn(el)\n  return new Promise(r => {\n    btn.addEventListener('click', async () => {\n      btn.classList.remove('show')\n      await delay(500)\n      r()\n    })\n  })\n}\n\nexport function createIframeDOM(contentDocument: Document, snapshotData: SnapshotRecord['data']) {\n  contentDocument.open()\n  const doctype = snapshotData.doctype\n  const doc = `<!DOCTYPE ${doctype.name} ${doctype.publicId ? 'PUBLIC ' + '\"' + doctype.publicId + '\"' : ''} ${doctype.systemId ? '\"' + doctype.systemId + '\"' : ''\n    }><html><head></head><body></body></html>`\n  contentDocument.write(doc)\n}\n\nexport function injectIframeContent(contentDocument: Document, snapshotData: SnapshotRecord['data']) {\n  const content = convertVNode(snapshotData.vNode)\n  if (content) {\n    const head = content.querySelector('head')\n    if (head) {\n      const style = parseHtmlStr(\n        `<div>\n            <style>\n                ${FIXED_CSS}\n            </style>\n        </div>`\n      )[0].firstElementChild!\n      head.appendChild(style)\n    }\n    const documentElement = contentDocument.documentElement\n    content.scrollLeft = snapshotData.scrollLeft\n    content.scrollTop = snapshotData.scrollTop\n    contentDocument.replaceChild(content, documentElement)\n  }\n}\n","\nimport { Store } from '../redux'\nimport { State } from '../redux/types'\nimport { ValueOf } from '../../../types'\n\nexport type Props = Partial<ValueOf<State>>\n\nconst shallowEqual = (prevProps: Props, nextProps: Props) => {\n    if (prevProps === nextProps) {\n        return true\n    }\n    if (\n        !(typeof prevProps === 'object' && prevProps != null) ||\n        !(typeof nextProps === 'object' && nextProps != null)\n    ) {\n        return false\n    }\n    const keysA = Object.keys(prevProps) as [keyof Props]\n    const keysB = Object.keys(nextProps) as [keyof Props]\n    if (keysA.length !== keysB.length) {\n        return false\n    }\n    for (let i = 0; i < keysA.length; i++) {\n        if (nextProps.hasOwnProperty(keysA[i])) {\n            if (prevProps[keysA[i]] !== nextProps[keysA[i]]) {\n                return false\n            }\n        } else {\n            return false\n        }\n    }\n    return true\n}\n\nconst provider = (store: typeof Store) => {\n    return (mapStateToProps: (state: State) => Props) => {\n        let props: Props\n        return (render: (state: Props) => void) => {\n            const getProps = () => mapStateToProps(store.getState())\n            store.subscribe(() => {\n                const newProps = getProps()\n                if (shallowEqual(newProps, props)) {\n                    return\n                }\n                render((props = newProps))\n            })\n        }\n    }\n}\n\nexport const connect = provider(Store)\n\nexport const ConnectProps = (mapStateToProps: (state: State) => Props | ValueOf<State>) => {\n    return function (target: any, propertyKey: string, descriptor: PropertyDescriptor) {\n        const originalMethod = descriptor.value\n\n        descriptor.value = function (cb?: Function) {\n            connect(mapStateToProps)(state => {\n                originalMethod.call(this, state)\n                cb && cb(state)\n            })\n        }\n    }\n}\n","\nexport abstract class HeatBarBase {\n    target: HTMLCanvasElement\n    context: CanvasRenderingContext2D\n    points: { step: number; snapshot: boolean }[]\n    targetWidth: number\n    targetHeight: number\n    ratio = 2\n    constructor(target: HTMLCanvasElement, points: { step: number; snapshot: boolean }[] = []) {\n        this.target = target\n        this.points = points\n\n        const targetWidth = this.target.offsetWidth * this.ratio\n        const targetHeight = this.target.offsetHeight * this.ratio\n\n        this.targetWidth = target.width = targetWidth\n        this.targetHeight = target.height = targetHeight\n\n        this.context = target.getContext('2d')!\n    }\n\n    abstract draw(): void\n\n    radiusRect(x: number, y: number, w: number, h: number, r: number, color = '#fff') {\n        const min_size = Math.min(w, h)\n        if (r > min_size / 2) {\n            r = min_size / 2\n        }\n\n        this.context.fillStyle = color\n        this.context.strokeStyle = color\n\n        this.context.beginPath()\n        this.context.moveTo(x + r, y)\n        this.context.arcTo(x + w, y, x + w, y + h, r)\n        this.context.arcTo(x + w, y + h, x, y + h, r)\n        this.context.arcTo(x, y + h, x, y, r)\n        this.context.arcTo(x, y, x + w, y, r)\n        this.context.closePath()\n\n        this.context.stroke()\n        this.context.fill()\n    }\n}\n","\nimport { HeatBarBase } from './base'\n\nexport class Pillar extends HeatBarBase {\n    constructor(target: HTMLCanvasElement, points: { step: number; snapshot: boolean }[]) {\n        super(target, points)\n        this.draw()\n    }\n\n    draw(): void {\n        const points = this.points\n        const len = points.length\n\n        const reactWidth = this.targetWidth / (len * 2)\n        const reactHeight = this.targetHeight\n\n        const max = Math.max.apply(\n            null,\n            points.map(p => p.step)\n        )\n\n        for (let i = 0; i < len; i++) {\n            const point = points[i]\n            if (!point.step) {\n                continue\n            }\n            const x = i * 2 * reactWidth\n            const y = 2\n            const w = reactWidth\n            const maxHeight = reactHeight * 0.9\n            const sinCurve = Math.sin((point.step / max) * (Math.PI / 2))\n            const z = 0.16\n            const scale = sinCurve * (1 - z) + z\n            const h = point.snapshot ? maxHeight : scale * maxHeight\n            const color = point.snapshot ? '#6AD1C7' : '#fff'\n\n            this.radiusRect(x, y, w, h, 2, color)\n        }\n    }\n}\n","\nimport { HeatBarBase } from './base'\n\nexport class NormalLine extends HeatBarBase {\n    constructor(target: HTMLCanvasElement) {\n        super(target)\n        this.draw()\n    }\n\n    draw() {\n        if (!this.targetWidth) {\n            return\n        }\n        const radius = 4\n        this.radiusRect(radius, 2 * radius, this.targetWidth - 2 * radius, 8, radius)\n    }\n}\n","\nimport { parseHtmlStr } from './common'\n\nexport interface IComponent {\n  parent: HTMLElement\n  target: HTMLElement\n}\n\nexport function Component(name: string, html: string, opts?: Partial<{ isShadow: boolean }>) {\n  return function (constructor: Function) {\n    if (!customElements.get(name))\n      customElements.define(\n        name,\n        class extends HTMLElement {\n          constructor() {\n            super()\n            const child = parseHtmlStr(html)[0]\n            constructor.prototype.target = child\n\n            const slot = child.getElementsByTagName('slot')[0]\n\n            if (slot && this.children?.length > 0) {\n              const parent = slot.parentElement\n                ;[...this.children].forEach(el => parent?.insertBefore(el, null))\n              parent?.removeChild(slot)\n            }\n\n            if (opts?.isShadow) {\n              this.attachShadow({ mode: 'open' }).append(child)\n            } else {\n              this.parentElement?.replaceChild(child, this)\n            }\n\n            constructor.prototype.parent = child.parentElement\n          }\n        }\n      )\n  }\n}\n\n/**\n * for vscode lit-html\n * highlight tagged string template\n * @param str\n */\nexport const html = function (strings: TemplateStringsArray, ...values: any) {\n  let str = ''\n  strings.forEach((string, i) => {\n    str += string + (values[i] || '')\n  })\n  return str\n}\n","\n// left: 37, up: 38, right: 39, down: 40,\n// spacebar: 32, pageup: 33, pagedown: 34, end: 35, home: 36\n\nexport function disableScrolling(target: Document) {\n    const keys = { 37: 1, 38: 1, 39: 1, 40: 1 } as { [key: string]: number }\n\n    function preventDefault(e: Event) {\n        e.preventDefault()\n    }\n\n    function preventDefaultForScrollKeys(e: Event & { keyCode: string }) {\n        if (keys[e.keyCode]) {\n            preventDefault(e)\n            return false\n        }\n    }\n\n    // modern Chrome requires { passive: false } when adding event\n    let supportsPassive = false\n    try {\n        target.addEventListener(\n            'test' as any,\n            () => {},\n            Object.defineProperty({}, 'passive', {\n                get: function () {\n                    supportsPassive = true\n                }\n            })\n        )\n    } catch (e) {}\n\n    const wheelOpt = supportsPassive ? ({ passive: false } as EventListenerOptions) : false\n    const wheelEvent = 'onwheel' in document.createElement('div') ? 'wheel' : 'mousewheel'\n\n    // call this to Disable\n    function disableScroll() {\n        target.addEventListener('DOMMouseScroll', preventDefault, false) // older FF\n        target.addEventListener(wheelEvent, preventDefault, wheelOpt) // modern desktop\n        target.addEventListener('touchmove', preventDefault, wheelOpt) // mobile\n        target.addEventListener('keydown', preventDefaultForScrollKeys, false)\n    }\n\n    // call this to Enable\n    // function enableScroll() {\n    //     target.removeEventListener('DOMMouseScroll', preventDefault, false)\n    //     target.removeEventListener(wheelEvent as any, preventDefault, wheelOpt)\n    //     target.removeEventListener('touchmove', preventDefault, wheelOpt)\n    //     target.removeEventListener('keydown', preventDefaultForScrollKeys, false)\n    // }\n\n    disableScroll()\n}\n","\nexport const emptyTemplate = `<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0,user-scalable=no, viewport-fit=cover\">\n    <meta http-equiv=\"Content-Security-Policy-Report-Only\" />\n    <title>TimeCat</title>\n</head>\n<body style=\"margin: 0; overflow: hidden\">\n</body>\n</html>\n`\nexport const pacmanCss = `.pacman-box{margin:0 auto;display:flex;vertical-align:middle;height:100vh;flex:0 1 auto;flex-direction:column;flex-grow:1;flex-shrink:0;flex-basis:25%;max-width:25%;align-items:center;justify-content:center}.pacman>div:first-of-type,.pacman>div:nth-child(2){width:0;height:0;border-right:25px solid transparent;border-top:25px solid grey;border-left:25px solid grey;border-bottom:25px solid grey;border-radius:25px;position:relative;left:-30px}@-webkit-keyframes rotate_pacman_half_up{0%,100%{-webkit-transform:rotate(270deg);transform:rotate(270deg)}50%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes rotate_pacman_half_up{0%,100%{-webkit-transform:rotate(270deg);transform:rotate(270deg)}50%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@-webkit-keyframes rotate_pacman_half_down{0%,100%{-webkit-transform:rotate(90deg);transform:rotate(90deg)}50%{-webkit-transform:rotate(0);transform:rotate(0)}}@keyframes rotate_pacman_half_down{0%,100%{-webkit-transform:rotate(90deg);transform:rotate(90deg)}50%{-webkit-transform:rotate(0);transform:rotate(0)}}@-webkit-keyframes pacman-balls{75%{opacity:.7}100%{-webkit-transform:translate(-100px,-6.25px);transform:translate(-100px,-6.25px)}}@keyframes pacman-balls{75%{opacity:.7}100%{-webkit-transform:translate(-100px,-6.25px);transform:translate(-100px,-6.25px)}}.pacman{transform: translateX(30px);position:relative}.pacman>div:nth-child(3){-webkit-animation:pacman-balls 1s -.66s infinite linear;animation:pacman-balls 1s -.66s infinite linear}.pacman>div:nth-child(4){-webkit-animation:pacman-balls 1s -.33s infinite linear;animation:pacman-balls 1s -.33s infinite linear}.pacman>div:nth-child(5){-webkit-animation:pacman-balls 1s 0s infinite linear;animation:pacman-balls 1s 0s infinite linear}.pacman>div:first-of-type{-webkit-animation:rotate_pacman_half_up .5s 0s infinite;animation:rotate_pacman_half_up .5s 0s infinite}.pacman>div:nth-child(2){-webkit-animation:rotate_pacman_half_down .5s 0s infinite;animation:rotate_pacman_half_down .5s 0s infinite;margin-top:-50px}.pacman>div:nth-child(3),.pacman>div:nth-child(4),.pacman>div:nth-child(5),.pacman>div:nth-child(6){background-color:grey;border-radius:100%;margin:2px;width:10px;height:10px;position:absolute;-webkit-transform:translate(0,-6.25px);transform:translate(0,-6.25px);top:25px;left:70px}`\n\nexport const loadingScriptContent = `const loadingNode = document.createElement('div')\nloadingNode.className = 'pacman-box';\nloadingNode.innerHTML = '<style>${pacmanCss}<\\/style><div class=\"pacman\"><div><\\/div><div><\\/div><div><\\/div><div><\\/div><div><\\/div><\\/div>'\nloadingNode.setAttribute('style', 'text-align: center;vertical-align: middle;line-height: 100vh;')\ndocument.body.insertBefore(loadingNode, document.body.firstChild);window.addEventListener('DOMContentLoaded', () => loadingNode.parentNode.removeChild(loadingNode))`\n\nconst ringCss = `.lds-ring{margin-left:-40px;margin-top:-40px;width:80px;height:80px;position:absolute;left:50%;top:50%}.lds-ring div{box-sizing:border-box;display:block;position:absolute;width:64px;height:64px;margin:8px;border:8px solid grey;border-radius:50%;animation:lds-ring 1.2s cubic-bezier(0.5,0,0.5,1) infinite;border-color:grey transparent transparent transparent}.lds-ring div:nth-child(1){animation-delay:-0.45s}.lds-ring div:nth-child(2){animation-delay:-0.3s}.lds-ring div:nth-child(3){animation-delay:-0.15s}@keyframes lds-ring{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}`\nexport const normalLoading = `<div class=\"lds-ring\"><style>${ringCss}<\\/style><div></div><div></div><div></div><div></div></div>`\n","\nexport enum PlayerEventTypes {\n    PLAY = 'play',\n    PAUSE = 'pause',\n    STOP = 'stop',\n    SPEED = 'speed',\n    RESIZE = 'resize',\n    PROGRESS = 'progress',\n    JUMP = 'jump'\n}\n","\nimport { ContainerComponent } from './container'\nimport { ReplayInternalOptions } from '../../types'\nimport { ConnectProps, Component, html, Store, PlayerReducerTypes, parseHtmlStr, IComponent } from '../utils'\n\n@Component(\n    'player-keyboard',\n    html`<div class=\"player-keyboard\">\n        <button class=\"play-or-pause\" type=\"button\" speed=\"1\"></button>\n    </div>`\n)\nexport class KeyboardComponent implements IComponent {\n    parent: HTMLElement\n    target: HTMLElement\n    c: ContainerComponent\n    options: ReplayInternalOptions\n    controller: HTMLElement\n    playOrPauseBtn: HTMLButtonElement\n\n    constructor(options: ReplayInternalOptions, container: ContainerComponent) {\n        this.options = options\n        this.c = container\n        this.init()\n    }\n\n    @ConnectProps(state => ({\n        speed: state.player.speed\n    }))\n    private watchPlayerSpeed(state?: { speed: number }) {\n        if (state) {\n            this.paly(state.speed)\n            this.setSpeed(state.speed)\n        }\n    }\n\n    private init() {\n        this.controller = this.c.container.querySelector('.player-keyboard') as HTMLElement\n        this.playOrPauseBtn = this.c.container.querySelector('.play-or-pause') as HTMLButtonElement\n\n        this.createFastForwards(this.options.fastForward)\n\n        const controllerHandler = (e: MouseEvent & { target: HTMLElement & { type: string } }) => {\n            if (e.target && e.target.type === 'button') {\n                const speed = Number((e.target as HTMLElement).getAttribute('speed'))\n                this.dispatchPlay(speed)\n            }\n        }\n\n        this.controller.addEventListener('click', controllerHandler, false)\n        this.options.destroyStore.add(() => {\n            this.controller.removeEventListener('click', controllerHandler, false)\n        })\n\n        this.watchPlayerSpeed()\n        this.detectWindowIsActive()\n    }\n\n    createFastForwards(speeds: number[]) {\n        speeds = Array.from(new Set([1].concat(speeds)))\n        if (speeds) {\n            const htmlStr = speeds.reduce(\n                (s, speed) => s + html`<button type=\"button\" class=\"speed\" speed=\"${speed}\">${speed}x</button>`,\n                ''\n            )\n\n            this.controller.append(...parseHtmlStr(htmlStr))\n        }\n    }\n\n    private dispatchPlay(speed = 0) {\n        Store.dispatch({\n            type: PlayerReducerTypes.SPEED,\n            data: {\n                speed\n            }\n        })\n    }\n\n    private detectWindowIsActive() {\n        const handler = () => {\n            if (document.visibilityState === 'hidden') {\n                this.dispatchPlay(0)\n            }\n        }\n        document.addEventListener('visibilitychange', handler, false)\n        this.options.destroyStore.add(() => {\n            document.removeEventListener('visibilitychange', handler, false)\n        })\n    }\n\n    private paly(speed: number) {\n        if (speed !== 0) {\n            this.playOrPauseBtn.innerText = ''\n            this.playOrPauseBtn.setAttribute('style', 'letter-spacing: 1px;font-weight: bold;')\n            this.playOrPauseBtn.removeAttribute('speed')\n        } else {\n            this.playOrPauseBtn.innerText = ''\n            this.playOrPauseBtn.removeAttribute('style')\n            this.playOrPauseBtn.setAttribute('speed', '1')\n        }\n    }\n\n    private setSpeed(speed: number) {\n        const speedNodes = this.c.container.querySelectorAll('.speed') as NodeListOf<HTMLButtonElement>\n        ;[...speedNodes].forEach(node => {\n            node.removeAttribute('disabled')\n        })\n\n        const index = getBtnIndex(speed)\n\n        function getBtnIndex(speed: number) {\n            return [...speedNodes].findIndex(node => node.getAttribute('speed') === speed.toString())\n        }\n        if (index > -1) {\n            speedNodes[index].setAttribute('disabled', '')\n        }\n    }\n}\n","import { FontRecordData } from '../../types'\nimport { PlayerComponent } from '../components/player'\n\nexport function renderFont(this: PlayerComponent, data: FontRecordData) {\n    const { family, source } = data\n    const buffer = new Uint8Array(source.length)\n    for (let i = 0; i < source.length; i++) {\n        const code = source.charCodeAt(i)\n        buffer[i] = code\n    }\n    const font = new window.FontFace(family, buffer)\n    this.c.sandBoxDoc.fonts.add(font)\n    document.fonts.add(font)\n}\n","import { PreFetchRecordData } from '../../types'\nimport { delay, nodeStore } from '../../utils'\n\nexport async function renderPatch(data: PreFetchRecordData) {\n    const { id, key, url, tag, text } = data\n    const node = nodeStore.getNode(id)\n    if (!node) {\n        await delay(1000)\n    }\n    const n = node as HTMLElement\n    if (n && n.getAttribute(key) === url && n.tagName === tag.toUpperCase()) {\n        if (tag === 'link') {\n            const replaceNode = document.createElement('style')\n            replaceNode.setAttribute('type', 'text/css')\n            replaceNode.setAttribute('css-url', url)\n            replaceNode.innerHTML = text\n            n.replaceWith(replaceNode)\n        }\n    }\n}\n","import { LocationRecordData } from '../../types'\nimport { nodeStore } from '../../utils'\n\nexport async function renderLocation(data: LocationRecordData) {\n    const { path, hash, href, contextNodeId } = data as LocationRecordData\n    const contextNode = nodeStore.getNode(contextNodeId)\n\n    if (contextNode) {\n        const context = contextNode.ownerDocument!.defaultView!\n        context.G_REPLAY_LOCATION = { ...context.G_REPLAY_LOCATION, ...{ path, hash, href } }\n    }\n}\n","import { SnapshotRecord } from '../../types'\nimport { nodeStore } from '../../utils'\nimport { setAttribute } from '../../virtual-dom'\nimport { createIframeDOM, injectIframeContent } from '../utils'\n\nexport async function renderSnapshot(data: SnapshotRecord['data']) {\n    const snapshotData = data\n    const { frameId } = snapshotData\n\n    if (frameId) {\n        const iframeNode = nodeStore.getNode(frameId) as HTMLIFrameElement\n        if (iframeNode) {\n            const src = iframeNode.getAttribute('src')\n            if (src) {\n                setAttribute(iframeNode, 'disabled-src', src)\n                setAttribute(iframeNode, 'src', null)\n            }\n            const contentDocument = iframeNode.contentDocument!\n            createIframeDOM(contentDocument, snapshotData)\n            injectIframeContent(contentDocument, snapshotData)\n        }\n    }\n}\n","import { ScrollRecordData } from '../../types'\nimport { nodeStore } from '../../utils'\nimport { PlayerComponent } from '../components/player'\n\nexport function renderScroll(this: PlayerComponent, data: ScrollRecordData) {\n    const { top, left, id, behavior: b } = data\n    const target = id ? (nodeStore.getNode(id) as HTMLElement) : this.c.sandBoxDoc.documentElement\n\n    if (!target) {\n        return\n    }\n\n    const curTop = target.scrollTop\n\n    // prevent jump too long distance\n    const height = window.G_REPLAY_DATA.snapshot.data.height\n    const behavior = b || Math.abs(top - curTop) > height * 3 ? 'auto' : 'smooth'\n\n    const opts = {\n        top,\n        left,\n        behavior\n    } as ScrollToOptions\n\n    try {\n        target.scroll(opts)\n    } catch (error) {\n        // fixed for in firefox\n        if (target.nodeName === 'HTML') {\n            target.ownerDocument.defaultView?.scroll(opts)\n        } else {\n            target.scrollLeft = left\n            target.scrollTop = top\n        }\n    }\n}\n","import { WindowRecordData } from '../../types'\nimport { nodeStore } from '../../utils'\nimport { PlayerComponent } from '../components/player'\n\nexport function renderWindow(this: PlayerComponent, data: WindowRecordData) {\n    const { width, height, id } = data\n    let target: HTMLElement\n    if (id) {\n        target = nodeStore.getNode(id) as HTMLElement\n        ;(target as HTMLElement).style.width = width + 'px'\n        ;(target as HTMLElement).style.height = height + 'px'\n    } else {\n        target = this.c.sandBoxDoc.body\n        this.c.resize({ setWidth: width, setHeight: height })\n    }\n}\n","import { MouseEventType, MouseRecordData } from '../../types'\nimport { nodeStore } from '../../utils'\nimport { PlayerComponent } from '../components/player'\n\nexport function renderMouse(this: PlayerComponent, data: MouseRecordData) {\n    const { x, y, id, type } = data\n\n    let left = 0,\n        top = 0\n\n    if (id) {\n        const node = nodeStore.getNode(id) as HTMLElement\n        let rect = {}\n        if (node && node.getBoundingClientRect) {\n            rect = node.getBoundingClientRect()\n        }\n        const { left: nodeLeft, top: nodeTop } = rect as any\n        left = nodeLeft\n        top = nodeTop\n    }\n\n    if (type === MouseEventType.MOVE) {\n        this.pointer.move(x + left, y + top)\n    } else if (type === MouseEventType.CLICK) {\n        this.pointer.click(x + left, y + top)\n    }\n}\n","import { FormElementEvent, FormElementRecordData } from '../../types'\nimport { nodeStore, revertStrByPatches } from '../../utils'\nimport { Store } from '../utils'\n\nexport function renderFormEl(data: FormElementRecordData, opts: { isJumping?: boolean }) {\n    const { isJumping } = opts || {}\n    const { id, key, type: formType, value, patches } = data as FormElementRecordData\n    const node = nodeStore.getNode(id) as HTMLInputElement | undefined\n    const { mode } = Store.getState().player.options\n\n    if (node) {\n        if (formType === FormElementEvent.INPUT || formType === FormElementEvent.CHANGE) {\n            if (patches && patches.length) {\n                const newValue = revertStrByPatches(node.value, patches)\n                node.value = newValue\n            } else if (key) {\n                ;(node as any)[key] = value\n            }\n        } else if (formType === FormElementEvent.FOCUS) {\n            mode !== 'live' && !isJumping && node.focus && node.focus({ preventScroll: true })\n        } else if (formType === FormElementEvent.BLUR) {\n            mode !== 'live' && !isJumping && node.blur && node.blur()\n        } else if (formType === FormElementEvent.PROP) {\n            if (key) {\n                ;(node as any)[key] = value\n            }\n        }\n    }\n}\n","import {\n  AttributesUpdateData,\n  CharacterDataUpdateData,\n  DOMRecordData,\n  RemoveUpdateData,\n  UpdateNodeData,\n  VNode,\n  VSNode\n} from '../../types'\nimport { isElementNode, isExistingNode, isVNode, nodeStore } from '../../utils'\nimport { convertVNode, createSpecialNode, setAttribute } from '../../virtual-dom'\n\nfunction insertOrMoveNode(data: UpdateNodeData, orderSet: Set<number>) {\n  const { parentId, nextId, node } = data\n  const parentNode = nodeStore.getNode(parentId!)\n\n  const findNextNode = (nextId: number | null): Node | null => {\n    return nextId ? nodeStore.getNode(nextId) : null\n  }\n\n  if (parentNode && isElementNode(parentNode)) {\n    let nextNode: Node | null = null\n\n    if (nextId) {\n      // Must wait for the relation node inserted first\n      if (orderSet.has(nextId)) {\n        return true\n      }\n\n      nextNode = findNextNode(nextId)\n      if (!nextNode) {\n        return true\n      }\n\n      if (!parentNode.contains(nextNode)) {\n        return true\n      }\n    }\n    const n = node as VNode | VSNode\n\n    let insertNode: Node | null\n\n    if (typeof node === 'number') {\n      insertNode = nodeStore.getNode(node)!\n\n      if (orderSet.has(node)) {\n        orderSet.delete(node)\n      }\n    } else if (isVNode(n)) {\n      insertNode = convertVNode(n)\n    } else {\n      insertNode = createSpecialNode(<VSNode>n)\n    }\n\n    if (insertNode) {\n      parentNode.insertBefore(insertNode, nextNode)\n    }\n  } else {\n    return true\n  }\n}\n\nexport function renderDom(data: DOMRecordData) {\n  const { addedNodes, movedNodes, removedNodes, attrs, texts } = data\n  removedNodes &&\n    removedNodes.forEach((data: RemoveUpdateData) => {\n      const { parentId, id } = data\n      const parentNode = nodeStore.getNode(parentId)\n      const node = nodeStore.getNode(id)\n      if (node && parentNode && parentNode.contains(node)) {\n        parentNode.removeChild(node as Node)\n      }\n    })\n\n  const orderSet: Set<number> = new Set()\n  const movedList = (movedNodes && movedNodes.slice()) || []\n\n  // node1 -> node2 -> node3\n  // insert node2 first\n  // insert node1 last\n  // => if nextId equal id, insert id first\n\n  movedList.forEach(data => {\n    // Is there a relations between two nodes\n    if (data.nextId) {\n      if (movedList.some(a => a.id === data.nextId)) {\n        orderSet.add(data.nextId)\n      }\n    }\n  })\n\n  const addedList = movedList\n    .map(item => {\n      const { id, parentId, nextId } = item\n      return {\n        node: id,\n        parentId,\n        nextId\n      } as UpdateNodeData\n    })\n    .concat((addedNodes && addedNodes.slice()) || [])\n\n  // Math Termial\n  if (addedList) {\n    const n = addedList.length\n    const maxRevertCount = n > 0 ? (n * n + n) / 2 : 0\n    let revertCount = 0\n\n    while (addedList.length) {\n      const addData = addedList.shift()\n      if (addData) {\n        if (insertOrMoveNode(addData, orderSet)) {\n          // revert here\n          if (revertCount++ < maxRevertCount) {\n            addedList.push(addData)\n          }\n        }\n      }\n    }\n  }\n\n  attrs &&\n    attrs.forEach((attr: AttributesUpdateData) => {\n      const { id, key, value } = attr\n      const node = nodeStore.getNode(id) as HTMLElement\n\n      if (node) {\n        setAttribute(node as HTMLElement, key, value)\n      }\n    })\n\n  texts &&\n    texts.forEach((text: CharacterDataUpdateData) => {\n      const { id, value, parentId } = text\n      const parentNode = nodeStore.getNode(parentId) as HTMLElement\n      const node = nodeStore.getNode(id) as HTMLElement\n\n      if (parentNode && node) {\n        if (isExistingNode(node)) {\n          node.textContent = value\n          return\n        }\n        parentNode.innerText = value\n      }\n    })\n}\n","\nimport {\n    RecordData,\n    FormElementRecordData,\n    RecordType,\n    DOMRecordData,\n    LocationRecordData,\n    CanvasRecordData,\n    SnapshotRecord,\n    PreFetchRecordData,\n    WebGLRecordData,\n    CanvasSnapshotRecordData\n} from '../types'\nimport { PlayerComponent } from './components/player'\nimport { delay } from '../utils'\nimport { renderFont } from './renders/font'\nimport { renderPatch } from './renders/patch'\nimport { renderLocation } from './renders/location'\nimport { renderSnapshot } from './renders/snapshot'\nimport { renderScroll } from './renders/scroll'\nimport { renderWindow } from './renders/window'\nimport { renderMouse } from './renders/mouse'\nimport { renderFormEl } from './renders/form-el'\nimport { renderDom } from './renders/dom'\n\nexport async function renderAll(\n    this: PlayerComponent,\n    recordData: RecordData,\n    opts?: { speed: number; isJumping: boolean }\n) {\n    const { isJumping, speed } = opts || {}\n    const delayTime = isJumping ? 0 : 200\n    const { type, data } = recordData\n\n    // waiting for mouse or scroll transform animation finish\n    const actionDelay = () => (delayTime ? delay(delayTime) : Promise.resolve())\n\n    switch (type) {\n        case RecordType.SNAPSHOT: {\n            renderSnapshot(data as SnapshotRecord['data'])\n            break\n        }\n\n        case RecordType.SCROLL: {\n            renderScroll.call(this, data)\n            break\n        }\n        case RecordType.WINDOW: {\n            renderWindow.call(this, data)\n            break\n        }\n        case RecordType.MOUSE: {\n            renderMouse.call(this, data)\n            break\n        }\n        case RecordType.DOM: {\n            if (!isJumping && speed === 1) {\n                await actionDelay()\n            }\n            renderDom(data as DOMRecordData)\n            break\n        }\n        case RecordType.FORM_EL: {\n            if (!isJumping && speed === 1) {\n                await actionDelay()\n            }\n            renderFormEl(data as FormElementRecordData, { isJumping })\n            break\n        }\n        case RecordType.LOCATION: {\n            renderLocation(data as LocationRecordData)\n            break\n        }\n        case RecordType.FONT: {\n            renderFont.call(this, data as CanvasRecordData)\n            break\n        }\n        case RecordType.PATCH: {\n            renderPatch(data as PreFetchRecordData)\n            break\n        }\n        default: {\n            break\n        }\n    }\n}\n","\nimport { PointerComponent } from './pointer'\nimport { renderAll } from '../render'\nimport {\n  getTime,\n  isSnapshot,\n  toTimeStamp,\n  base64ToFloat32Array,\n  delay,\n  AnimationFrame,\n  nodeStore,\n  encodeWAV\n} from '../../utils'\nimport { ProgressComponent } from './progress'\nimport { ContainerComponent } from './container'\nimport { RecordData, AudioData, SnapshotRecord, ReplayInternalOptions, ReplayData, VideoData } from '../../types'\nimport { BroadcasterComponent } from './broadcaster'\nimport { PlayerEventTypes } from '../types'\nimport {\n  Component,\n  html,\n  Store,\n  PlayerReducerTypes,\n  ReplayDataReducerTypes,\n  ConnectProps,\n  observer,\n  transToReplayData,\n  normalLoading,\n  parseHtmlStr,\n  isMobile,\n  IComponent\n} from '../utils'\n\n@Component(\n  'timecat-player',\n  html`<div class=\"timecat-player\">\n        <iframe\n            class=\"player-sandbox\"\n            sandbox=\"allow-same-origin allow-scripts allow-popups allow-popups-to-escape-sandbox\"\n        ></iframe>\n    </div>`\n)\nexport class PlayerComponent implements IComponent {\n  target: HTMLElement\n  parent: HTMLElement\n  options: ReplayInternalOptions\n  c: ContainerComponent\n  pointer: PointerComponent\n  progress: ProgressComponent\n  broadcaster: BroadcasterComponent\n  audioNode: HTMLAudioElement\n\n  records: RecordData[]\n  speed = 0\n  recordIndex = 0\n  frameIndex = 0\n  isFirstTimePlay = true\n  frameInterval: number\n  maxFrameInterval = 250\n  frames: number[]\n  maxFps = 30\n\n  initTime: number\n  startTime: number\n  animationDelayTime = 300\n  elapsedTime = 0\n  audioOffset = 150\n\n  curViewStartTime: number\n  curViewEndTime: number\n  curViewDiffTime = 0\n  preViewsDurationTime = 0\n  viewIndex = 0\n  viewsLength: number\n\n  subtitlesIndex = 0\n  audioData: AudioData\n  audioBlobUrl: string\n\n  videos: VideoData[]\n\n  RAF: AnimationFrame\n  isJumping: boolean\n  shouldWaitForSync: boolean\n\n  maxIntensityStep = 8\n\n  constructor(\n    options: ReplayInternalOptions,\n    c: ContainerComponent,\n    pointer: PointerComponent,\n    progress: ProgressComponent,\n    broadcaster: BroadcasterComponent\n  ) {\n    this.options = options\n    this.c = c\n    this.pointer = pointer\n    this.progress = progress\n    this.broadcaster = broadcaster\n    this.init()\n  }\n\n  @ConnectProps(state => ({\n    speed: state.player.speed\n  }))\n  private watchPlayerSpeed(state?: { speed: number }) {\n    if (state) {\n      const speed = state.speed\n      const curSpeed = this.speed\n      this.speed = speed\n\n      observer.emit(PlayerEventTypes.SPEED, speed)\n\n      if (speed > 0) {\n        this.play()\n        if (curSpeed === 0) {\n          observer.emit(PlayerEventTypes.PLAY)\n        }\n      } else {\n        this.pause()\n      }\n    }\n  }\n\n  @ConnectProps(state => ({\n    endTime: state.progress.endTime\n  }))\n  private watchProgress() {\n    this.recalculateProgress()\n    this.viewsLength = Store.getState().replayData.packs.length\n  }\n\n  private watcherProgressJump() {\n    observer.on(PlayerEventTypes.JUMP, async (state: { index: number; time: number; percent?: number }) =>\n      this.jump(state, true)\n    )\n  }\n\n  private async init() {\n    this.audioNode = new Audio()\n    this.calcFrames()\n    this.viewsLength = Store.getState().replayData.packs.length\n    this.initViewState()\n    this.setViewState()\n\n    if (this.records.length <= 2) {\n      // is live mode\n      window.addEventListener('record-data', this.streamHandle.bind(this))\n      this.options.destroyStore.add(() => window.removeEventListener('record-data', this.streamHandle.bind(this)))\n    } else {\n      this.watchProgress()\n      this.watchPlayerSpeed()\n      this.watcherProgressJump()\n    }\n\n    observer.on(PlayerEventTypes.RESIZE, async () => {\n      // wait for scaling page finish to get target offsetWidth\n      await delay(500)\n      this.recalculateProgress()\n    })\n\n    observer.on(PlayerEventTypes.PROGRESS, (frame: number) => {\n      const percent = frame / (this.frames.length - 1)\n      this.progress.setProgressPosition(percent)\n    })\n  }\n\n  private initAudio() {\n    if (!this.audioData) {\n      return\n    }\n\n    if (this.audioData.src) {\n      this.audioBlobUrl = location.href.split('/').slice(0, -1).join('/') + '/' + this.audioData.src\n    } else {\n      const { wavStrList, pcmStrList } = this.audioData\n\n      let type: 'wav' | 'pcm' | undefined = undefined\n      const list: string[] = []\n      if (wavStrList.length) {\n        type = 'wav'\n        list.push(...wavStrList)\n      } else if (pcmStrList.length) {\n        type = 'pcm'\n        list.push(...pcmStrList)\n      }\n\n      if (!type) {\n        return\n      }\n\n      const dataArray: Float32Array[] = []\n      for (let i = 0; i < list.length; i++) {\n        const data = base64ToFloat32Array(list[i])\n        dataArray.push(data)\n      }\n\n      const audioBlob =\n        type === 'wav' ? new Blob(dataArray, { type: 'audio/wav' }) : encodeWAV(dataArray, this.audioData.opts)\n      const audioBlobUrl = URL.createObjectURL(audioBlob)\n      this.audioBlobUrl = audioBlobUrl\n    }\n  }\n\n  private mountVideos() {\n    if (!this.videos || !this.videos.length) {\n      return\n    }\n\n    this.videos.forEach(video => {\n      const { src, id } = video\n      const videoElement = nodeStore.getNode(id)\n\n      if (videoElement) {\n        const target = videoElement as HTMLVideoElement\n        target.muted = true\n        target.autoplay = target.loop = target.controls = false\n        target.src = src\n      }\n    })\n  }\n\n  private streamHandle(this: PlayerComponent, e: CustomEvent) {\n    const record = e.detail as RecordData\n    if (isSnapshot(record)) {\n      Store.getState().replayData.currentData.snapshot = record as SnapshotRecord\n      this.setViewState()\n      return\n    }\n    this.execFrame(record as RecordData)\n  }\n\n  private initViewState() {\n    const { currentData } = Store.getState().replayData\n    const { records, audio, videos, head } = currentData\n    this.records = this.processing(records)\n    this.audioData = audio\n    this.videos = videos\n    const { userAgent } = head?.data || {}\n    if (isMobile(userAgent as string)) {\n      this.pointer.hidePointer()\n    }\n\n    // live mode\n    if (!this.records.length) {\n      return\n    }\n\n    this.subtitlesIndex = 0\n    this.broadcaster.cleanText()\n\n    this.curViewStartTime = (head && head.time) || records[0].time\n    this.curViewEndTime = records.slice(-1)[0].time\n\n    this.preViewsDurationTime = 0\n    this.curViewDiffTime = 0\n    this.viewIndex = 0\n  }\n\n  private setViewState() {\n    this.c.setViewState()\n    this.initAudio()\n    this.mountVideos()\n  }\n\n  private async jump(state: { index: number; time: number; percent?: number }, shouldLoading = false) {\n    this.isJumping = true\n    this.shouldWaitForSync = true\n    let loading: HTMLElement | undefined = undefined\n    const { speed } = Store.getState().player\n    const { index, time, percent } = state\n\n    if (shouldLoading) {\n      this.pause(false)\n      loading = parseHtmlStr(normalLoading)[0]\n      this.c.container.appendChild(loading)\n      await delay(100)\n    }\n\n    const nextReplayData = this.getNextReplayData(index)\n    if (!nextReplayData) {\n      return\n    }\n\n    this.initViewState()\n\n    if (this.viewIndex !== index || this.startTime >= time) {\n      const [{ packsInfo }, { packs }] = [Store.getState().progress, Store.getState().replayData]\n\n      const diffTime = packsInfo[index].diffTime\n      this.curViewEndTime = packs[index].slice(-1)[0].time\n      this.curViewDiffTime = diffTime\n      this.preViewsDurationTime = packsInfo.slice(0, index).reduce((a, b) => a + b.duration, 0)\n      this.viewIndex = index\n      this.records = packs[index]\n    }\n\n    const frameIndex =\n      1 +\n      this.frames.findIndex((t, i) => {\n        const cur = t\n        const next = this.frames[i + 1] || cur + 1\n        if (time >= cur && time <= next) {\n          return true\n        }\n      })\n\n    this.frameIndex = frameIndex\n    this.initTime = getTime()\n    this.recordIndex = 0\n    this.audioData = nextReplayData.audio\n    this.startTime = time\n    this.subtitlesIndex = 0\n\n    if (percent !== undefined) {\n      this.progress.moveThumb(percent)\n      await delay(100)\n    }\n\n    this.setViewState()\n    this.playAudio()\n    this.loopFramesByTime(this.frames[this.frameIndex])\n\n    if (loading) {\n      await delay(100)\n      this.c.container.removeChild(loading)\n      Store.dispatch({ type: PlayerReducerTypes.SPEED, data: { speed } })\n    }\n\n    this.isJumping = false\n    setTimeout(() => (this.shouldWaitForSync = false), 100)\n  }\n\n  private getNextReplayData(index: number): ReplayData | null {\n    const { packs } = Store.getState().replayData\n\n    const nextPack = packs[index]\n    if (nextPack) {\n      const nextData = transToReplayData(nextPack)\n      Store.dispatch({ type: ReplayDataReducerTypes.UPDATE_DATA, data: { currentData: nextData } })\n      return nextData\n    }\n    return null\n  }\n\n  private loopFramesByTime(currTime: number, isJumping = false) {\n    let nextTime = this.frames[this.frameIndex]\n\n    while (nextTime && currTime >= nextTime) {\n      if (!isJumping) {\n        observer.emit(PlayerEventTypes.PROGRESS, this.frameIndex, this.frames.length - 1)\n      }\n      this.frameIndex++\n      this.renderEachFrame()\n      nextTime = this.frames[this.frameIndex]\n    }\n    return nextTime\n  }\n\n  private play() {\n    if (this.frameIndex === 0) {\n      this.progress.moveThumb()\n      if (!this.isFirstTimePlay) {\n        this.getNextReplayData(0)\n        this.initViewState()\n        this.setViewState()\n      } else {\n        this.progress.drawHeatPoints()\n      }\n    }\n\n    this.playAudio()\n    this.isFirstTimePlay = false\n\n    if (this.RAF && this.RAF.requestID) {\n      this.RAF.stop()\n    }\n\n    this.RAF = new AnimationFrame(loop.bind(this), this.maxFps)\n    this.options.destroyStore.add(() => this.RAF.stop())\n    this.RAF.start()\n\n    this.initTime = getTime()\n    this.startTime = this.frames[this.frameIndex]\n\n    async function loop(this: PlayerComponent, t: number, loopIndex: number) {\n      const timeStamp = getTime() - this.initTime\n      if (this.frameIndex > 0 && this.frameIndex >= this.frames.length) {\n        this.stop()\n        return\n      }\n\n      const currTime = this.startTime + timeStamp * this.speed\n      const nextTime = this.loopFramesByTime(currTime)\n\n      if (nextTime > this.curViewEndTime - this.curViewDiffTime && this.viewIndex < this.viewsLength - 1) {\n        const { packsInfo } = Store.getState().progress\n        const index = this.viewIndex + 1\n        const { startTime, diffTime } = packsInfo[index]\n        this.jump({ index: index, time: startTime - diffTime })\n      }\n\n      this.elapsedTime = (currTime - this.frames[0]) / 1000\n\n      this.syncAudio()\n      this.syncVideos()\n    }\n  }\n\n  private playAudio() {\n    if (!this.audioData) {\n      return\n    }\n    if (!this.audioBlobUrl) {\n      this.pauseAudio()\n      return\n    }\n\n    if (this.audioNode) {\n      if (!this.audioNode.src || this.audioNode.src !== this.audioBlobUrl) {\n        this.audioNode.src = this.audioBlobUrl\n      }\n\n      this.syncAudioTargetNode()\n\n      if (this.speed > 0) {\n        this.audioNode.play()\n      }\n    }\n  }\n\n  private syncAudio() {\n    if (!this.audioNode) {\n      return\n    }\n    const targetCurrentTime = this.audioNode.currentTime\n    const targetExpectTime = this.elapsedTime - this.preViewsDurationTime / 1000\n    const diffTime = Math.abs(targetExpectTime - targetCurrentTime)\n    const allowDiff = (100 + this.audioOffset) / 1000\n    if (diffTime > allowDiff) {\n      this.syncAudioTargetNode()\n    }\n  }\n\n  private syncAudioTargetNode() {\n    const elapsedTime = this.elapsedTime - this.preViewsDurationTime / 1000\n    const offset = this.audioOffset / 1000\n    this.audioNode.currentTime = elapsedTime + offset\n  }\n\n  private syncVideos() {\n    const initTime = this.curViewStartTime\n    const currentTime = initTime + (this.elapsedTime * 1000 - this.preViewsDurationTime)\n    const allowDiff = 100\n\n    this.videos.forEach(video => {\n      const { startTime, endTime, id } = video\n      const target = nodeStore.getNode(id) as HTMLVideoElement\n\n      if (!target) {\n        return\n      }\n\n      if (currentTime >= startTime && currentTime < endTime) {\n        if (target.paused && this.speed > 0) {\n          target.play()\n        }\n\n        const targetCurrentTime = target.currentTime\n        const targetExpectTime =\n          this.elapsedTime - this.preViewsDurationTime / 1000 - (startTime - initTime) / 1000\n\n        const diffTime = Math.abs(targetExpectTime - targetCurrentTime)\n        if (diffTime > allowDiff / 1000) {\n          target.currentTime = targetExpectTime\n        }\n      } else {\n        if (!target.paused) {\n          target.pause()\n        }\n      }\n    })\n  }\n\n  private pauseAudio() {\n    if (this.audioNode) {\n      this.audioNode.pause()\n    }\n  }\n\n  private pauseVideos() {\n    if (this.videos && this.videos.length) {\n      this.videos.forEach(video => {\n        const target = nodeStore.getNode(video.id) as HTMLVideoElement | undefined\n        if (target) {\n          target.pause()\n        }\n      })\n    }\n  }\n\n  private renderEachFrame() {\n    this.progress.updateTimer(this.frameIndex, this.frameInterval, this.curViewDiffTime)\n\n    let data: RecordData\n    while (\n      this.recordIndex < this.records.length &&\n      (data = this.records[this.recordIndex]).time - this.curViewDiffTime <= this.frames[this.frameIndex]\n    ) {\n      this.execFrame(data)\n      this.recordIndex++\n    }\n\n    this.syncSubtitles()\n  }\n\n  private async syncSubtitles() {\n    if (this.shouldWaitForSync) {\n      return\n    }\n\n    if (this.audioData && this.audioData.subtitles.length) {\n      const subtitles = this.audioData.subtitles\n      let { text } = subtitles[this.subtitlesIndex]\n      const { end } = subtitles[this.subtitlesIndex]\n      const audioEndTime = toTimeStamp(end)\n\n      if (this.elapsedTime > audioEndTime / 1000) {\n        this.broadcaster.cleanText()\n        if (this.subtitlesIndex < subtitles.length - 1) {\n          while (true) {\n            const nextEndTime = toTimeStamp(subtitles[this.subtitlesIndex].end)\n            if (nextEndTime / 1000 > this.elapsedTime) {\n              break\n            }\n            this.subtitlesIndex++\n          }\n          text = subtitles[this.subtitlesIndex].text\n        }\n      }\n      this.broadcaster.updateText(text)\n    }\n  }\n\n  private pause(emit = true) {\n    if (this.RAF) {\n      this.RAF.stop()\n    }\n    Store.dispatch({\n      type: PlayerReducerTypes.SPEED,\n      data: {\n        speed: 0\n      }\n    })\n    this.pauseAudio()\n    this.pauseVideos()\n    if (emit) {\n      observer.emit(PlayerEventTypes.PAUSE)\n    }\n  }\n\n  private stop() {\n    this.speed = 0\n    this.recordIndex = 0\n    this.frameIndex = 0\n    this.elapsedTime = 0 // unit: sec\n    this.pause()\n    this.audioNode.currentTime = 0\n    observer.emit(PlayerEventTypes.STOP)\n  }\n\n  private execFrame(record: RecordData) {\n    const { isJumping, speed } = this\n    renderAll.call(this, record, { isJumping, speed })\n  }\n\n  private calcFrames(maxInterval = this.maxFrameInterval) {\n    if (this.options.mode === 'live') {\n      return []\n    }\n    const preTime = this.frames && this.frames[this.frameIndex]\n    const { duration, startTime, endTime } = Store.getState().progress\n    this.frameInterval = Math.max(20, Math.min(maxInterval, (duration / 60 / 1000) * 60 - 40))\n    const interval = this.frameInterval\n    const frames: number[] = []\n    let nextFrameIndex: number | undefined\n    for (let i = startTime; i < endTime + interval; i += interval) {\n      frames.push(i)\n      if (!nextFrameIndex && preTime && i >= preTime) {\n        nextFrameIndex = frames.length - 1\n      }\n    }\n    frames.push(endTime)\n    if (nextFrameIndex) {\n      this.frameIndex = nextFrameIndex!\n    }\n    this.frames = frames\n  }\n\n  private calcHeatPointsData() {\n    const frames = this.frames\n    if (!frames.length || !this.options.heatPoints) {\n      return []\n    }\n    const state = Store.getState()\n    const { packs } = state.replayData\n    const { duration } = state.progress\n    const sliderWidth = this.progress.slider.offsetWidth\n    const column = Math.floor(sliderWidth / 7)\n    const gap = duration / column\n\n    const heatPoints = packs.reduce((acc, records) => {\n      let index = 0\n      let step = 0\n      let snapshot = false\n\n      const endTime = records.slice(-1)[0].time\n      let currentTime = records[0].time\n\n      while (currentTime < endTime && index < records.length) {\n        const nextTime = currentTime + gap\n        const record = records[index]\n        if (record.time < nextTime) {\n          index++\n          step++\n          if (isSnapshot(record)) {\n            snapshot = true\n          }\n          continue\n        }\n        acc.push({ step, snapshot })\n        step = 0\n        snapshot = false\n        currentTime += gap\n      }\n\n      return acc\n    }, [] as { step: number; snapshot: boolean }[])\n\n    return heatPoints\n  }\n\n  private orderRecords(records: RecordData[]) {\n    if (!records.length) {\n      return []\n    }\n\n    records.sort((a: RecordData, b: RecordData) => {\n      return a.time - b.time\n    })\n\n    return records\n  }\n\n  private recalculateProgress() {\n    this.calcFrames()\n    this.progress.drawHeatPoints(this.calcHeatPointsData())\n  }\n\n  private processing(records: RecordData[]) {\n    return this.orderRecords(records)\n  }\n}\n","\nimport { setAttribute } from '../../virtual-dom'\nimport { delay } from '../../utils'\nimport { ContainerComponent } from './container'\nimport { Component, html, IComponent } from '../utils'\n\n@Component(\n    'player-pointer',\n    html`<div class=\"player-pointer\">\n        <img\n            src=\"data:image/png;base64,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\"\n            alt=\"pointer\"\n        />\n        <div class=\"spinner\"></div>\n    </div>`\n)\nexport class PointerComponent implements IComponent {\n    public parent: HTMLElement\n    public target: HTMLElement\n\n    private x = 0\n    private y = 0\n\n    private show: boolean\n    private pointer: HTMLElement\n    private c: ContainerComponent\n    constructor(c: ContainerComponent) {\n        this.c = c\n        this.initPointer()\n        this.togglePointer(true)\n    }\n\n    private initPointer() {\n        this.pointer = this.c.container.querySelector('.player-pointer') as HTMLElement\n    }\n\n    private togglePointer(show = !this.show) {\n        this.show = show\n        ;(this.pointer.firstElementChild as HTMLElement).style.display = this.show ? 'inherit' : 'none'\n    }\n\n    public hidePointer() {\n        this.togglePointer((this.show = false))\n    }\n\n    public move(x: number, y: number) {\n        this.x = x\n        this.y = y\n        this.pointer.style.left = this.x + 'px'\n        this.pointer.style.top = this.y + 'px'\n    }\n\n    public async click(x: number, y: number) {\n        this.move(x, y)\n        if (this.pointer.hasAttribute('active')) {\n            return\n        }\n        await delay(200)\n        setAttribute(this.pointer, 'active', '')\n        await delay(400)\n        setAttribute(this.pointer, 'active', null)\n    }\n}\n","\nimport { secondToTime, getDateTime, stateDebounce } from '../../utils'\nimport { ContainerComponent } from './container'\nimport { PlayerEventTypes } from '../types'\nimport { Pillar, NormalLine, observer, Store, Component, IComponent, html } from '../utils'\nimport { ReplayInternalOptions } from '../../types'\n\n@Component(\n  'player-progress',\n  html`<div class=\"player-progress\">\n        <div class=\"player-timer\">00:00</div>\n        <div class=\"player-slider-bar\">\n            <div class=\"player-heat-bar-container\">\n                <canvas class=\"player-heat-bar\"></canvas>\n            </div>\n            <div class=\"player-current-progress\">\n                <div class=\"player-thumb\"></div>\n            </div>\n        </div>\n    </div>`\n)\nexport class ProgressComponent implements IComponent {\n  target: HTMLElement\n  parent: HTMLElement\n  c: ContainerComponent\n  progress: HTMLElement\n  thumb: HTMLElement\n  currentProgress: HTMLElement\n  timer: HTMLElement\n  slider: HTMLElement\n  heatBar: HTMLCanvasElement\n  heatPoints: { step: number; snapshot: boolean }[] = []\n  options: ReplayInternalOptions\n\n  constructor(options: ReplayInternalOptions, c: ContainerComponent) {\n    this.options = options\n    this.c = c\n    this.progress = c.container.querySelector('.player-progress')! as HTMLElement\n    this.progress = c.container.querySelector('.player-progress')! as HTMLElement\n    this.timer = c.container.querySelector('.player-timer') as HTMLElement\n    this.currentProgress = this.progress.querySelector('.player-current-progress') as HTMLElement\n    this.slider = this.progress.querySelector('.player-slider-bar') as HTMLElement\n    this.heatBar = this.progress.querySelector('.player-heat-bar') as HTMLCanvasElement\n    this.thumb = this.progress.querySelector('.player-thumb') as HTMLElement\n    this.listenElementOnHover(this.parent)(state => {\n      if (state === 'in') {\n        this.thumb.setAttribute('active', '')\n        return\n      }\n      this.thumb.removeAttribute('active')\n    })\n\n    const handle = (e: MouseEvent) => {\n      const { left, width: sliderWidth } = this.slider.getBoundingClientRect()\n      const width = Math.max(0, Math.min(e.x - left, sliderWidth))\n      const percent = +(width / sliderWidth).toFixed(3)\n      const progress = this.findProgressByPosition(percent)\n      observer.emit(PlayerEventTypes.JUMP, progress)\n    }\n    this.progress.addEventListener('click', handle, false)\n    this.options.destroyStore.add(() => {\n      this.progress.removeEventListener('click', handle, false)\n    })\n  }\n\n  private findProgressByPosition = (() => {\n    const cacheMap = new Map() as Map<number, { index: number; percent: number; time: number }>\n    return function (percent: number) {\n      const result = cacheMap.get(percent)\n      if (result) {\n        return result\n      }\n      const { startTime, duration, packsInfo } = Store.getState().progress\n      const { packs } = Store.getState().replayData\n      const time = startTime + duration * percent\n\n      const index = packsInfo.findIndex(pack => {\n        const { startTime, endTime, diffTime } = pack\n        if (startTime - diffTime <= time && endTime - diffTime >= time) {\n          return true\n        }\n      })\n\n      if (index !== undefined) {\n        const records = packs[index]\n        const packInfo = packsInfo[index]\n        const { startTime, diffTime } = packInfo\n        const totalDurationTime = packsInfo.reduce((acc, info) => acc + info.duration, 0)\n        const beforeDurationTime = packsInfo.slice(0, index).reduce((acc, info) => acc + info.duration, 0)\n        for (let i = 0; i < records.length; i++) {\n          const cur = records[i]\n          const next = records[i + 1]\n          if (next) {\n            if (time >= cur.time - diffTime && time <= next.time - diffTime) {\n              // revise position between two records\n              const reviseTime = totalDurationTime * percent - (cur.time - startTime) - beforeDurationTime\n              const time = cur.time - diffTime + reviseTime\n              const data = { index, percent, time }\n              cacheMap.set(percent, data)\n              return data\n            }\n          }\n        }\n      }\n      return null\n    }\n  })()\n\n  private listenElementOnHover = (target: HTMLElement) =>\n    stateDebounce<'in' | 'out'>(\n      setState => {\n        const stateIn = () => setState('in')\n        const stateOut = () => setState('out')\n        target.addEventListener('mouseover', stateIn, false)\n        target.addEventListener('mouseout', stateOut, false)\n        this.options.destroyStore.add(() => {\n          target.removeEventListener('mouseover', stateIn, false)\n          target.removeEventListener('mouseout', stateOut, false)\n        })\n      },\n      state => (state === 'in' ? 200 : 1000),\n      'out'\n    )\n\n  public updateTimer(frameIndex: number, frameInterval: number, curViewDiffTime: number) {\n    const c = this.c.options\n    const { timeMode } = c\n    const seconds = (frameIndex + 1) * frameInterval\n\n    let time\n    if (timeMode === 'durationTime') {\n      time = secondToTime(seconds / 1000)\n    } else {\n      const { startTime } = Store.getState().progress\n      const timestamp = startTime + seconds + curViewDiffTime\n      time = getDateTime(timestamp)\n    }\n    if (time !== this.timer.innerText) {\n      this.timer.innerText = time\n    }\n  }\n\n  public moveThumb(percent = 0) {\n    const left = percent * this.slider.offsetWidth\n    this.currentProgress.style.width = left + 'px'\n  }\n\n  public drawHeatPoints(points?: { step: number; snapshot: boolean }[]) {\n    if (points) {\n      if (isPointsEqual(this.heatPoints, points)) {\n        return\n      }\n      this.heatPoints = points\n    } else if (this.heatPoints.length) {\n      return\n    }\n\n    if (this.heatPoints.length) {\n      new Pillar(this.heatBar, this.heatPoints)\n    } else {\n      new NormalLine(this.heatBar)\n    }\n\n    function isPointsEqual(a: { step: number; snapshot: boolean }[], b: { step: number; snapshot: boolean }[]) {\n      if (a.length !== b.length) {\n        return false\n      }\n\n      for (let i = 0; i < a.length; i++) {\n        const itemA = a[i]\n        const itemB = b[i]\n        if (itemA.step !== itemB.step || itemA.snapshot !== itemB.snapshot) {\n          return false\n        }\n      }\n      return true\n    }\n  }\n\n  public setProgressPosition(percent: number) {\n    this.currentProgress.style.width = this.slider.offsetWidth * percent + 'px'\n  }\n}\n","\nimport { ContainerComponent } from './container'\nimport { Component, html, IComponent } from '../utils'\n\n@Component(\n    'player-broadcaster',\n    html`<div class=\"player-broadcaster\">\n        <div class=\"float-layer\" hidden>\n            <span class=\"subtitle\"></span>\n        </div>\n    </div>`\n)\nexport class BroadcasterComponent implements IComponent {\n    parent: HTMLElement\n    target: HTMLElement\n    broadcaster: HTMLElement\n    floatLayer: HTMLElement\n    subtitle: HTMLElement\n    c: ContainerComponent\n    constructor(container: ContainerComponent) {\n        this.c = container\n        this.init()\n    }\n\n    private init() {\n        this.broadcaster = this.c.container.querySelector('.player-broadcaster') as HTMLElement\n        this.floatLayer = this.broadcaster.firstElementChild as HTMLElement\n        this.subtitle = this.floatLayer.firstElementChild as HTMLElement\n    }\n\n    public updateText(text: string) {\n        text = text.trim()\n        if (this.subtitle.innerText.trim() === text) {\n            return\n        }\n\n        this.subtitle.innerText = text\n        this.floatLayer.toggleAttribute('hidden', !text)\n    }\n\n    public cleanText() {\n        this.updateText('')\n    }\n}\n","\nimport { Component, html, Store, IComponent } from '../utils'\nimport { ContainerComponent } from './container'\nimport { getRawScriptContent, logAdvice, logError } from '../../utils'\nimport { ReplayInternalOptions } from '../../types'\n\n@Component(\n    'player-toolbox',\n    html`<div class=\"player-toolbox\">\n        <div class=\"player-export\">\n            <button type=\"button\">\n                <svg\n                    version=\"1.1\"\n                    xmlns=\"http://www.w3.org/2000/svg\"\n                    xmlns:xlink=\"http://www.w3.org/1999/xlink\"\n                    x=\"0px\"\n                    y=\"0px\"\n                    width=\"16px\"\n                    height=\"16px\"\n                    viewBox=\"0 0 511.994 511.994\"\n                    style=\"enable-background:new 0 0 511.994 511.994;\"\n                    xml:space=\"preserve\"\n                >\n                    <path\n                        style=\"fill:#fff;\"\n                        d=\"M403.079,310.458c-3.627-7.232-11.008-11.797-19.093-11.797h-64v-85.333c0-11.776-9.536-21.333-21.333-21.333H213.32\n            c-11.776,0-21.333,9.557-21.333,21.333v85.333h-64c-8.064,0-15.445,4.565-19.072,11.797c-3.605,7.232-2.837,15.872,2.027,22.336\n            l128,170.667c4.011,5.376,10.347,8.533,17.045,8.533c6.72,0,13.056-3.157,17.067-8.533l128-170.667\n            C405.917,326.33,406.685,317.69,403.079,310.458z\"\n                    />\n                    <path\n                        style=\"fill:#fff;\"\n                        d=\"M298.663,128.001H213.33c-11.797,0-21.333,9.536-21.333,21.333c0,11.797,9.536,21.333,21.333,21.333h85.333\n                        c11.797,0,21.333-9.536,21.333-21.333C319.996,137.537,310.46,128.001,298.663,128.001z\"\n                    />\n                    <path\n                        style=\"fill:#fff;\"\n                        d=\"M298.663,64.001H213.33c-11.797,0-21.333,9.536-21.333,21.333s9.536,21.333,21.333,21.333h85.333\n                        c11.797,0,21.333-9.536,21.333-21.333S310.46,64.001,298.663,64.001z\"\n                    />\n                </svg>\n            </button>\n        </div>\n        <div class=\"player-fullscreen\">\n            <svg\n                version=\"1.1\"\n                id=\"Capa_1\"\n                width=\"16px\"\n                height=\"16px\"\n                xmlns=\"http://www.w3.org/2000/svg\"\n                xmlns:xlink=\"http://www.w3.org/1999/xlink\"\n                x=\"0px\"\n                y=\"0px\"\n                viewBox=\"0 0 469.333 469.333\"\n                style=\"enable-background:new 0 0 469.333 469.333;\"\n                xml:space=\"preserve\"\n            >\n                <path\n                    style=\"fill:#fff;\"\n                    d=\"M160,0H10.667C4.771,0,0,4.771,0,10.667V160c0,5.896,4.771,10.667,10.667,10.667H32c5.896,0,10.667-4.771,10.667-10.667\n                V42.667H160c5.896,0,10.667-4.771,10.667-10.667V10.667C170.667,4.771,165.896,0,160,0z\"\n                />\n                <path\n                    style=\"fill:#fff;\"\n                    d=\"M458.667,0H309.333c-5.896,0-10.667,4.771-10.667,10.667V32c0,5.896,4.771,10.667,10.667,10.667h117.333V160\n                c0,5.896,4.771,10.667,10.667,10.667h21.333c5.896,0,10.667-4.771,10.667-10.667V10.667C469.333,4.771,464.563,0,458.667,0z\"\n                />\n                <path\n                    style=\"fill:#fff;\"\n                    d=\"M458.667,298.667h-21.333c-5.896,0-10.667,4.771-10.667,10.667v117.333H309.333c-5.896,0-10.667,4.771-10.667,10.667\n                v21.333c0,5.896,4.771,10.667,10.667,10.667h149.333c5.896,0,10.667-4.771,10.667-10.667V309.333\n                C469.333,303.437,464.563,298.667,458.667,298.667z\"\n                />\n                <path\n                    style=\"fill:#fff;\"\n                    d=\"M160,426.667H42.667V309.333c0-5.896-4.771-10.667-10.667-10.667H10.667C4.771,298.667,0,303.437,0,309.333v149.333\n                c0,5.896,4.771,10.667,10.667,10.667H160c5.896,0,10.667-4.771,10.667-10.667v-21.333\n                C170.667,431.438,165.896,426.667,160,426.667z\"\n                />\n            </svg>\n        </div>\n    </div>`\n)\nexport class ToolboxComponent implements IComponent {\n    parent: HTMLElement\n    target: HTMLElement\n    c: ContainerComponent\n    exportBtn: HTMLElement\n    fullscreenBtn: HTMLElement\n    fullscreenTarget: HTMLElement\n    options: ReplayInternalOptions\n    constructor(options: ReplayInternalOptions, c: ContainerComponent) {\n        this.options = options\n        this.c = c\n        this.exportBtn = this.target.querySelector('.player-export') as HTMLButtonElement\n        this.exportBtn.addEventListener('click', this.export)\n\n        this.fullscreenBtn = this.target.querySelector('.player-fullscreen') as HTMLButtonElement\n        this.fullscreenTarget = (this.c.container.parentNode as ShadowRoot).host.parentElement!\n\n        this.fullscreenTarget.addEventListener('fullscreenchange', () => this.cancelFullScreen())\n        this.fullscreenBtn.addEventListener('click', () => this.setFullScreen())\n\n        this.options.destroyStore.add(() => {\n            this.exportBtn.removeEventListener('click', this.export)\n            this.fullscreenTarget.removeEventListener('fullscreenchange', () => this.cancelFullScreen())\n            this.fullscreenBtn.removeEventListener('click', () => this.setFullScreen())\n        })\n    }\n\n    public async export() {\n        \n    }\n\n    private setFullScreen() {\n        this.c.resize({ maxScale: 100 })\n        this.fullscreenTarget.requestFullscreen().catch(msg => {\n            logError(msg)\n            logAdvice('If the Player within the iframe, you should be set the attribute: allowfullscreen')\n        })\n    }\n\n    private cancelFullScreen() {\n        if (document.fullscreen) {\n            return\n        }\n        this.c.resize({ maxScale: 0 })\n    }\n}\n","\nimport { KeyboardComponent } from './keyboard'\nimport { PlayerComponent } from './player'\nimport { PointerComponent } from './pointer'\nimport { ProgressComponent } from './progress'\nimport { ContainerComponent } from './container'\nimport { BroadcasterComponent } from './broadcaster'\nimport { ReplayInternalOptions } from '../../types'\nimport { Component, IComponent, html } from '../utils'\nimport { ToolboxComponent } from './toolbox'\n\n@Component(\n    'player-panel',\n    html`<div class=\"player-panel\">\n        <slot></slot>\n    </div>`\n)\nexport class PanelComponent implements IComponent {\n    target: HTMLElement\n    parent: HTMLElement\n    keyboard: KeyboardComponent\n    progress: ProgressComponent\n    pointer: PointerComponent\n    player: PlayerComponent\n    broadcaster: BroadcasterComponent\n    c: ContainerComponent\n    options: ReplayInternalOptions\n\n    constructor(c: ContainerComponent) {\n        this.c = c\n        this.options = c.options\n        this.initComponent()\n    }\n\n    private initComponent() {\n        new ToolboxComponent(this.options, this.c)\n        this.keyboard = new KeyboardComponent(this.options, this.c)\n        this.progress = new ProgressComponent(this.options, this.c)\n        this.pointer = new PointerComponent(this.c)\n        this.broadcaster = new BroadcasterComponent(this.c)\n        this.player = new PlayerComponent(this.options, this.c, this.pointer, this.progress, this.broadcaster)\n    }\n}\n","\nimport { html, Component } from '../utils'\n\n@Component(\n    'player-start-page',\n    html`<div class=\"player-start-page\" style=\"display: none;\">\n        <div class=\"play-btn\">\n            <svg\n                version=\"1.1\"\n                id=\"Capa_1\"\n                xmlns=\"http://www.w3.org/2000/svg\"\n                xmlns:xlink=\"http://www.w3.org/1999/xlink\"\n                x=\"0px\"\n                y=\"0px\"\n                viewBox=\"0 0 142.448 142.448\"\n                style=\"enable-background:new 0 0 142.448 142.448;\"\n                xml:space=\"preserve\"\n            >\n                <g>\n                    <path\n                        style=\"fill:#bbb;\"\n                        d=\"M142.411,68.9C141.216,31.48,110.968,1.233,73.549,0.038c-20.361-0.646-39.41,7.104-53.488,21.639\n        C6.527,35.65-0.584,54.071,0.038,73.549c1.194,37.419,31.442,67.667,68.861,68.861c0.779,0.025,1.551,0.037,2.325,0.037\n        c19.454,0,37.624-7.698,51.163-21.676C135.921,106.799,143.033,88.377,142.411,68.9z M111.613,110.336\n        c-10.688,11.035-25.032,17.112-40.389,17.112c-0.614,0-1.228-0.01-1.847-0.029c-29.532-0.943-53.404-24.815-54.348-54.348\n        c-0.491-15.382,5.122-29.928,15.806-40.958c10.688-11.035,25.032-17.112,40.389-17.112c0.614,0,1.228,0.01,1.847,0.029\n        c29.532,0.943,53.404,24.815,54.348,54.348C127.91,84.76,122.296,99.306,111.613,110.336z\"\n                    />\n                    <path\n                        style=\"fill:#bbb;\"\n                        d=\"M94.585,67.086L63.001,44.44c-3.369-2.416-8.059-0.008-8.059,4.138v45.293\n        c0,4.146,4.69,6.554,8.059,4.138l31.583-22.647C97.418,73.331,97.418,69.118,94.585,67.086z\"\n                    />\n                </g>\n            </svg>\n        </div>\n    </div>`\n)\nexport class PageStartComponent {\n    constructor() {\n        setTimeout(() => {}) // do any thing prevent tree-shake\n    }\n}\n","\nimport { nodeStore, debounce, createURL } from '../../utils'\nimport smoothScroll from 'smoothscroll-polyfill'\nimport { ReplayInternalOptions, VNode, InfoData } from '../../types'\nimport { observer, Store, disableScrolling, parseHtmlStr, html, createIframeDOM, injectIframeContent } from '../utils'\nimport { PlayerEventTypes } from '../types'\nimport { PanelComponent } from './panel'\nimport { PageStartComponent } from './page-start'\n\nimport HTML from '../ui.html' // @ts-nocheck @ts-ignore\nimport CSS from '../ui.scss' // @ts-nocheck @ts-ignore\n\nexport class ContainerComponent {\n    panel: PanelComponent\n    container: HTMLElement\n    sandBox: HTMLIFrameElement\n    sandBoxDoc: Document\n    resize: (options?: Partial<{ setWidth: number; setHeight: number; maxScale: number }>) => void\n    options: ReplayInternalOptions\n    target: Element | Window\n    shadowHost: HTMLElement\n\n    constructor(options: ReplayInternalOptions) {\n        this.options = options\n        this.init()\n    }\n\n    private init() {\n        const target = this.options.target\n        const targetElement = typeof target === 'string' ? document.querySelector(target) : target\n        this.target = targetElement as HTMLElement\n        this.initTemplate()\n        this.initSandbox()\n        const { resize } = this.makeItResponsive()\n        this.resize = resize\n        this.initPanel()\n    }\n\n    private initPanel() {\n        this.panel = new PanelComponent(this)\n        new PageStartComponent()\n    }\n\n    private initSandbox() {\n        this.sandBox = this.container.querySelector('.player-sandbox') as HTMLIFrameElement\n        this.sandBoxDoc = this.sandBox.contentDocument!\n        this.setSmoothScroll(this.sandBox.contentWindow!)\n        createIframeDOM(this.sandBoxDoc, this.getSnapshotRecord())\n        if (this.options.disableScrolling) {\n            disableScrolling(this.sandBox.contentWindow!.document)\n        }\n        this.setViewState()\n    }\n\n    private getSnapshotRecord() {\n        return Store.getState().replayData.currentData.snapshot.data as {\n            vNode: VNode\n        } & InfoData\n    }\n\n    // use scroll polyfill if browser (e.g. ios safari) not support\n    private setSmoothScroll(context: Window) {\n        smoothScroll.polyfill()\n        context.HTMLElement.prototype.scroll = window.scroll\n        context.HTMLElement.prototype.scrollTo = window.scrollTo\n    }\n\n    public setViewState() {\n        nodeStore.reset()\n        const recordData = this.getSnapshotRecord()\n        const { pathname, hash, href } = createURL(recordData.href) as URL\n        const doc = this.sandBoxDoc\n        const context = doc.defaultView as Window\n        context.G_REPLAY_LOCATION = { ...(context.G_REPLAY_LOCATION || {}), ...{ path: pathname, hash, href } }\n        injectIframeContent(this.sandBoxDoc, recordData)\n    }\n\n    private initTemplate() {\n        const targetElement: HTMLElement =\n            this.target instanceof Window ? (this.target as Window).document.body : (this.target as HTMLElement)\n\n        const shadowHost = parseHtmlStr(html`<div class=\"player-shadowhost\"></div>`)[0]\n        targetElement.appendChild(shadowHost)\n\n        const shadow = shadowHost.attachShadow({ mode: 'open' })\n        shadow.appendChild(this.createStyle('player-css', CSS))\n        shadow.appendChild(this.createContainer('player-main', HTML))\n        this.shadowHost = shadowHost\n    }\n\n    private createContainer(className: string, html: string) {\n        const parser = new DOMParser()\n        const el = parser.parseFromString(html, 'text/html').body.firstChild as HTMLElement\n        el.className = className\n        el.style.width = this.getSnapshotRecord().width + 'px'\n        el.style.height = this.getSnapshotRecord().height + 'px'\n        el.style.display = 'none'\n        return (this.container = el)\n    }\n\n    private makeItResponsive() {\n        const self = this\n        const debounceResizeFn = debounce(resizeHandle, 500)\n\n        const callbackFn = () => debounceResizeFn({ target: self.target as EventTarget } as Event)\n        window.addEventListener('resize', callbackFn, true)\n\n        this.options.destroyStore.add(() => window.removeEventListener('resize', callbackFn, true))\n\n        setTimeout(() => (this.container.style.opacity = '1'))\n        this.container.style.display = 'block'\n\n        let lockScale = 0\n\n        triggerResize()\n\n        function triggerResize(options?: Partial<{ setWidth: number; setHeight: number; maxScale: number }>) {\n            const { setHeight, setWidth, maxScale } = options || {}\n            resizeHandle(({ target: self.target } as unknown) as Event, setWidth, setHeight, maxScale)\n        }\n\n        async function resizeHandle(e?: Event, setWidth?: number, setHeight?: number, maxScale = 1) {\n            if (!e) {\n                return\n            }\n            const { width: targetWidth, height: targetHeight } = getPageSize(self.container)\n\n            setWidth = setWidth || targetWidth\n            setHeight = setHeight || targetHeight\n\n            switch (maxScale) {\n                case 0:\n                    lockScale = 0\n                    break\n                case 100:\n                    lockScale = 100\n                    break\n            }\n\n            const setMaxScale = lockScale || maxScale\n\n            if (e.target instanceof Window) {\n                const { innerWidth: w, innerHeight: h } = e.target\n                scalePages(self.container, w, h, setWidth, setHeight, setMaxScale)\n            } else {\n                const { offsetWidth: w, offsetHeight: h } = e.target as HTMLElement\n                scalePages(self.container, w, h, setWidth, setHeight, setMaxScale)\n            }\n        }\n\n        function scalePages(\n            target: HTMLElement,\n            maxWidth: number,\n            maxHeight: number,\n            setWidth: number,\n            setHeight: number,\n            setMaxScale: number\n        ) {\n            const { mode: replayMode } = Store.getState().player.options || {}\n\n            const panelHeight = replayMode === 'live' ? 0 : 40 - 2 // subtract the gap\n\n            const scaleX = maxWidth / setWidth\n            const scaleY = maxHeight / (setHeight + panelHeight)\n\n            // limit scale\n            const scale = Math.min(scaleX > scaleY ? scaleY : scaleX, setMaxScale || 1)\n\n            const left = (setWidth * scale - setWidth) / 2 + (maxWidth - setWidth * scale) / 2\n\n            const top = (maxHeight - setHeight - panelHeight * scale) / 2\n\n            target.style.transform = `scale(${scale})`\n            target.style.left = left + 'px'\n            target.style.top = top + 'px'\n\n            const currentWidth = parseInt(target.style.width)\n            const currentHeight = parseInt(target.style.height)\n\n            if (setWidth !== currentWidth || setHeight !== currentHeight) {\n                target.style.width = setWidth + 'px'\n                target.style.height = setHeight + 'px'\n                observer.emit(PlayerEventTypes.RESIZE)\n            }\n        }\n\n        function getPageSize(target: HTMLElement) {\n            return {\n                width: parseInt(target.style.width, 10),\n                height: parseInt(target.style.height, 10)\n            }\n        }\n\n        return {\n            resize: triggerResize\n        }\n    }\n\n    private createStyle(id: string, s: string) {\n        const style = document.createElement('style')\n        style.id = id\n        style.innerHTML = s\n        return style\n    }\n}\n","\nimport {\n  logError,\n  nodeStore,\n  debounce,\n  logInfo,\n  isDev,\n  removeGlobalVariables,\n  delay,\n  tempEmptyFn\n} from '../utils'\nimport { ContainerComponent } from './components/container'\nimport {\n  SnapshotRecord,\n  ReplayOptions,\n  RecordData,\n  RecordType,\n  ReplayInternalOptions,\n  HeadRecord\n} from '../types'\nimport { waitStart, removeStartPage, showStartMask } from './utils'\nimport { PlayerEventTypes } from './types'\nimport {\n  FMP,\n  observer,\n  Store,\n  PlayerReducerTypes,\n  ProgressReducerTypes,\n  ReplayDataReducerTypes,\n  transToReplayData,\n} from './utils'\nimport { getPacks } from './utils/transform'\n\nconst defaultReplayOptions = {\n  autoplay: true,\n  mode: 'default',\n  target: window,\n  heatPoints: true,\n  timeMode: 'durationTime',\n  fastForward: [2, 8],\n  disableScrolling: true\n}\n\nexport class Player {\n  on: (key: PlayerEventTypes, fn: Function) => void = tempEmptyFn\n  destroy: () => void = tempEmptyFn\n  append: (records: RecordData[]) => void = tempEmptyFn\n  constructor(options?: ReplayOptions) {\n    const player = new PlayerModule(options)\n    Object.keys(this).forEach((key: keyof Player) => (this[key] = player[key].bind(player)))\n  }\n}\n\nexport class PlayerModule {\n  c: ContainerComponent\n  fmp: FMP\n  destroyStore = new Set<Function>()\n  options: ReplayInternalOptions\n  constructor(options?: ReplayOptions) {\n    nodeStore.reset()\n    this.init(options)\n  }\n\n  private async init(options?: ReplayOptions) {\n    if (!isDev) {\n      logInfo()\n    }\n    const opts = {\n      destroyStore: this.destroyStore,\n      ...defaultReplayOptions,\n      ...options\n    } as ReplayInternalOptions\n\n    this.options = opts\n    Store.dispatch({ type: PlayerReducerTypes.OPTIONS, data: { options: opts } })\n    this.destroyStore.add(() => Store.unsubscribe())\n\n    const records = await this.getRecords(opts)\n    const packs = getPacks(records)\n    const firstData = transToReplayData(packs[0])\n    // console.log(firstData);\n    const { audio } = firstData\n    Store.dispatch({\n      type: ReplayDataReducerTypes.UPDATE_DATA,\n      data: { records, packs, currentData: firstData }\n    })\n\n    const hasAudio = audio && (audio.src || audio.wavStrList.length || audio.pcmStrList.length);\n\n    this.c = new ContainerComponent(opts)\n    const container = this.c.container\n    showStartMask(this.c);\n    (this.fmp = new FMP()).ready(async () => {\n      if (hasAudio) {\n        await waitStart(container)\n      }\n      removeStartPage(container)\n      if (records.length && opts.autoplay) {\n        Store.dispatch({\n          type: PlayerReducerTypes.SPEED,\n          data: { speed: 1 }\n        })\n      }\n    });\n    // console.log('packs', packs);\n    if (packs.length) {\n      this.calcProgress()\n    }\n\n    if (records.length <= 2) {\n      // live mode\n      Store.dispatch({ type: PlayerReducerTypes.OPTIONS, data: { options: { mode: 'live' } } })\n      const panel = this.c.panel.target\n      if (panel) {\n        panel.setAttribute('style', 'display: none')\n      }\n    }\n  }\n\n  private async getRecords(options: ReplayInternalOptions) {\n    const { receiver, records: recordsData } = options\n    const records = recordsData || (receiver && (await this.dataReceiver(receiver)))\n\n    if (!records) {\n      throw logError('Replay data not found')\n    }\n\n    return records\n  }\n\n  private calcProgress() {\n    const { packs } = Store.getState().replayData\n    const startTime = packs[0][0].time\n\n    let duration = 0\n    const packsInfo: {\n      startTime: number\n      endTime: number\n      duration: number\n      diffTime: number\n    }[] = []\n    let diffTime = 0\n    packs.forEach((pack, index) => {\n      const startTime = pack[0].time\n      const endTime = pack.slice(-1)[0].time\n      if (index) {\n        diffTime += startTime - packs[index - 1].slice(-1)[0].time\n      }\n      const info = {\n        startTime,\n        endTime,\n        duration: endTime - startTime,\n        diffTime\n      }\n      packsInfo.push(info)\n      duration += info.duration\n    })\n    const endTime = startTime + duration\n\n    Store.dispatch({\n      type: ProgressReducerTypes.PROGRESS,\n      data: {\n        duration,\n        packsInfo,\n        startTime,\n        endTime\n      }\n    })\n  }\n\n  private dispatchEvent(type: string, data: RecordData) {\n    const event = new CustomEvent(type, { detail: data })\n    window.dispatchEvent(event)\n  }\n\n  private async dataReceiver(receiver: (sender: (data: RecordData) => void) => void): Promise<RecordData[]> {\n    let isResolved: boolean\n    let head: HeadRecord\n    let snapshot: SnapshotRecord\n    return await new Promise(resolve => {\n      receiver(data => {\n        if (isResolved) {\n          this.dispatchEvent('record-data', data as RecordData)\n        } else {\n          if (data.type === RecordType.HEAD) {\n            head = data\n          } else if (data.type === RecordType.SNAPSHOT) {\n            snapshot = data\n          }\n\n          if (head && snapshot) {\n            isResolved = true\n            resolve([head, snapshot])\n            this.dispatchEvent('record-data', data as RecordData)\n          }\n        }\n      })\n    })\n  }\n\n  private triggerCalcProgress = debounce(() => this.calcProgress(), 500)\n\n  async destroy(opts: { removeDOM: boolean } = { removeDOM: true }) {\n    this.destroyStore.forEach(un => un())\n    observer.destroy()\n    Store.unsubscribe()\n    await delay(0)\n    removeGlobalVariables()\n    if (opts.removeDOM) {\n      const shadowHost = this.c.shadowHost\n      this.c.shadowHost.parentElement?.removeChild(shadowHost)\n    }\n  }\n\n  public on(key: PlayerEventTypes, fn: Function) {\n    observer.on(key, fn)\n  }\n\n  public async append(records: RecordData[]) {\n    await delay(0)\n    Store.dispatch({\n      type: ReplayDataReducerTypes.APPEND_RECORDS,\n      data: { records }\n    })\n\n    this.triggerCalcProgress()\n  }\n}\n"],"names":["initState","isMobileModule","isMobile"],"mappings":"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"}